{"version":3,"sources":["routes/Pack/styles.module.scss","routes/Pack/PackToolbar/styles.module.scss","components/ItemsList/styles.module.scss","components/EditingToolbar/styles.module.scss","routes/Pack/Settings/styles.module.scss","components/Navigation/styles.module.scss","routes/NewPack/styles.module.scss","components/FileStorage/styles.module.scss","routes/Pack/Rounds/styles.module.scss","components/ItemsList/Item/styles.module.scss","components/FormikField/styles.module.scss","components/NotFound404/styles.module.scss","components/Container/styles.module.scss","routes/Dashboard/styles.module.scss","routes/Pack/Question/QuestionContent/styles.module.scss","routes/Pack/Rounds/CheckList/styles.module.scss","consts.js","localStorage/indexeddb.js","localStorage/localPacks.js","localStorage/fileStorage/hashFile.js","localStorage/fileStorage/saveFile.js","localStorage/fileStorage/index.js","reducers/fileRendering.js","reducers/index.js","reducers/packReducer.js","reducers/dashboardReducer.js","reducers/menuReducer.js","localStorage/packGenerator/fileResolver.js","utils.js","localStorage/packGenerator/parser.js","localStorage/packGenerator/index.js","routes/Dashboard/packTypes/Upload.js","components/ContextMenu/index.js","components/ConfirmationDialog/index.js","components/ConfirmationDialog/DeleteConfirmationDialog.js","components/RenameDialog/index.js","routes/Dashboard/packTypes/Pack.js","routes/Dashboard/packTypes/index.js","routes/Dashboard/index.js","components/Navigation/index.js","routes/NewPack/index.js","routes/Pack/PackBreadcrumbs/index.js","routes/Pack/PackToolbar/SavingDialog.js","routes/Pack/PackToolbar/index.js","components/ItemsList/Item/index.js","components/ItemsList/Handle.js","routes/Pack/Rounds/List/Round.js","components/ItemsList/AddItem/index.js","components/ItemsList/index.js","components/EditingToolbar/index.js","routes/Pack/Rounds/List/index.js","routes/Pack/Rounds/CheckList/index.js","routes/Pack/Rounds/index.js","components/FileStorage/Filters.js","components/FileStorage/File.js","components/FileStorage/List.js","components/FileStorage/Upload.js","components/FileStorage/index.js","components/ImageField/index.js","components/FormikField/index.js","routes/Pack/Settings/index.js","components/NotFound404/index.js","routes/Pack/RoundThemes/RoundTable.js","routes/Pack/RoundThemes/Questions.js","components/ClickIsolator.js","routes/Pack/RoundThemes/Theme.js","routes/Pack/RoundThemes/ThemesEditing.js","routes/Pack/RoundThemes/index.js","routes/Pack/Question/QuestionContent/hints.js","routes/Pack/Question/QuestionContent/WithHint.js","routes/Pack/Question/QuestionContent/FormFields.js","routes/Pack/Question/QuestionContent/ScenarioEvent.js","routes/Pack/Question/QuestionContent/Scenario.js","routes/Pack/Question/QuestionContent/NoScenario.js","routes/Pack/Question/QuestionContent/validation.js","routes/Pack/Question/QuestionContent/index.js","routes/Pack/Question/index.js","routes/Pack/index.js","components/Container/index.js","App.js","index.js","routes/Pack/RoundThemes/styles.module.scss","routes/Pack/Rounds/List/styles.module.scss","components/ImageField/styles.module.scss","components/ItemsList/AddItem/styles.module.scss"],"names":["module","exports","format","PropTypes","shape","uuid","string","name","creationTime","number","date","thumbnail","formatDefaults","xmlJS","js2xml","_declaration","_attributes","version","encoding","Types","xmlns","Default","Extension","ContentType","compact","uuidRegex","init","db","Dexie","stores","packs","join","files","loadLocalPack","packUUID","a","get","pack","loadLocalPacks","toArray","saveLocalPack","put","deleteLocalPack","delete","hashFile","file","Promise","resolve","reject","blobSlice","File","prototype","slice","mozSlice","webkitSlice","chunkSize","chunks","Math","ceil","size","spark","SparkMD5","ArrayBuffer","fileReader","FileReader","currentChunk","onload","e","append","target","result","loadNext","end","onerror","start","readAsArrayBuffer","call","mimeTypes","image","audio","video","allowedFileTypes","saveFile","blob","includes","type","filename","hash","where","length","Object","entries","find","some","fileURI","nanoid","fileObject","fileName","addedAt","Date","now","generateMiniature","miniature","img","document","createElement","src","URL","createObjectURL","width","height","min","newWidth","newHeight","canvas","drawTransparentPattern","getContext","drawImage","toBlob","revokeObjectURL","getFile","getAllURIsFromPack","primaryKeys","getPacksIDs","packIDs","map","getDeletedPacks","existingPacks","allPacks","filter","deleteFile","equals","getRecent","filters","splice","indexOf","deletedPacks","push","anyOf","limit","offset","reverse","sortBy","deleteFilesOfPack","bulkDelete","removeFileURI","state","newState","changeProperty","propertyName","newValue","createStore","combineReducers","action","dashboard","uploading","fileRendering","callback","keys","menu","position","FileResolver","zip","this","resolvedFiles","folders","warnings","folder","error","id","images","getDir","extension","removeUndefined","object","fromEntries","undefined","history","createBrowserHistory","emptyFunc","formatDate","dateTime","Intl","DateTimeFormat","year","month","day","hour","minute","seconds","mapPackState","questionTypes","initValues","schema","initialValues","fields","defaultValues","forEach","key","hasQuestionInEachTheme","Boolean","rounds","every","round","themes","theme","questions","hasThemeInEachRound","hasAtLeast25Questions","reduce","prev","hasQuestionWithAuction","question","hasQuestionWithBagCat","hasScenarioInEachQuestion","scenario","JSZip","loadAsync","contentXML","async","packContent","content","xml2js","mapText","array","elements","t","text","packageTag","n","property","attributes","difficulty","restriction","publisher","logo","language","infoTag","authors","tags","Number","over18","bom","packErrors","check","errors","questionType","currentTheme","questionParams","properties","cost","self","knows","cat","auction","bagcat","sponsored","param","questionPriceType","realpriceFrom","realpriceTo","realpriceStep","xmlescape","String","generate","texts","comment","generator","tag","author","all","price","scenarioEvent","time","duration","data","replaceAll","imageField","correctAnswers","answer","incorrectAnswers","declaration","generateAsync","compression","zipInBlob","SlideTransition","props","Slide","direction","connect","React","useState","entered","setEntered","setContent","useEffect","interval","setInterval","c","clearInterval","onDragEnter","onDragLeave","onDrop","acceptedFiles","previousState","dispatch","concat","parsePackGenerator","then","noContentXML","reloadPacks","store","getState","accept","getRootProps","getInputProps","className","cx","styles","packBase","newPack","upload","dragOver","backdrop","visible","Snackbar","open","onClose","TransitionComponent","Alert","severity","alert","i","ContextMenuActions","createContext","ContextMenu","items","setItems","contextMenu","preventDefault","clientX","clientY","close","Provider","value","children","ReactDOM","createPortal","Menu","anchorReference","anchorPosition","top","left","item","MenuItem","onClick","stopPropagation","ListItemIcon","icon","ListItemText","body","displayName","okCallback","ConfirmationDialog","forwardRef","ref","setOpen","setText","confirmText","setConfirmText","checkboxText","setCheckboxText","checkboxValue","setCheckboxValue","handleAction","confirmed","checked","useImperativeHandle","maxWidth","DialogTitle","title","DialogContent","DialogContentText","FormControlLabel","control","Checkbox","defaultChecked","onChange","label","DialogActions","Button","autoFocus","color","DeleteConfirmationDialog","confirmationDialogRef","useRef","useHistory","confirmPackDeletion","current","deleteFiles","confirmRoundDeletion","confirmDeleteQuestion","RenameDialog","setCallback","subject","setSubject","oldName","setOldName","setValue","askToRename","handleCancel","TextField","placeholder","variant","style","marginTop","disabled","Pack","confDialogRef","renameDialog","dashboardActions","useContext","DashboardContext","contextMenuActions","handleDeletePack","handleRenamePack","newName","onContextMenu","info","Create","Loading","loading","Skeleton","skeleton","setSrc","cleanup","pictureContainer","Dashboard","LocalPacks","savedLocalPacks","setSavedLocalPacks","loadPacks","packsUUID","sort","b","contextActions","packsList","PackBase","Array","fill","_","PackSwitch","to","Navigation","infoShown","setInfoShown","AppBar","zIndex","Toolbar","logoContainer","Typography","component","href","rel","IconButton","Dialog","NewPack","packName","setPackName","createPack","uuidv4","dayjs","examples","container","field","floor","random","onKeyUp","linkStyles","link","route","useLocation","path","setPath","page","pathname","split","RegExp","parts","crumbs","currentPack","settings","paths","default","pathRegex","test","Breadcrumbs","Transition","Zoom","SavingDialog","generating","setGenerating","setErrors","setWarnings","setPack","save","startProcessing","setTimeout","bundlePack","console","message","saveAs","slugify","autoBom","LinearProgress","warning","savingDialogRef","handleDeleteRound","roundIndex","parseInt","handleDeleteQuestion","match","themeIndex","questionPrice","questionIndex","findIndex","buttons","root","pageToolbar","regex","toolbar","getStyle","transform","axisLockY","Item","draggableId","index","provided","Card","innerRef","draggableProps","Handle","handle","dragHandleProps","Round","handleRemoveRound","handleOpenMenu","cardOfRound","editing","ItemContent","CardActionArea","CardContent","paddingBottom","darkTheme","spacing","flex1","roundNamesTextInput","handleRoundNameChange","inputField","flex2","AddItem","addingItem","setAddingItem","addItem","ItemName","handleAddItem","onAdd","button","expand","inputLabel","addButtonOuter","startIcon","addButton","buttonLabel","outlinedInput","handleDone","focus","FormControl","InputLabel","OutlinedInput","onKeyDown","paddingRight","inputRef","endAdornment","InputAdornment","ItemsList","WeakMap","itemsMap","setItemsMap","onDragEnd","droppableId","droppableProps","droppableClassName","list","oid","has","set","itemComponent","useIdAsKey","gutterBottom","listStyles","noItems","noItemsLabel","EditingToolbar","heading","showButton","hint","onSwitch","setRounds","setEditing","handleAddRound","packRounds","updateRounds","names","destination","startIndex","endIndex","from","removed","reorder","source","droppable","namesList","Items","first","starting","last","ending","replace","done","Marker","marker","lineBefore","hidden","bullet","lineAfter","required","optional","filterItems","f","reducer","progress","point","max","progressBar","caption","line","Rounds","roundsPage","Filters","Stack","checkboxes","handleChange","checkbox","fileSrc","setFileSrc","infoDialogueOpen","setInfoDialogueOpen","removing","setRemoving","handleDeleteFile","onRemove","Grid","xs","md","sm","handleSelect","itemInner","preview","foreground","background","filesize","symbols","List","setFiles","mapFiles","mappedFiles","packSwitchUUID","packGroup","packDivider","grid","j","noFilesYet","Upload","setUploading","uploadingFileIndex","setUploadingFileIndex","filesListLength","setFilesListLength","uploaded","setUploaded","handleDrop","hasErrors","fileIndex","errorMessage","setTab","uploadingFiles","uploadingScreen","uploadingCaption","CircularProgress","thickness","onDropAccepted","dropzone","flex","supportedTypes","FileStorage","tab","setPacks","setPackUUID","setCheckboxes","handleClose","deletedPack","filteredPacks","cb","checkedPack","sx","palette","grey","dialog","Tabs","textColor","tabs","Tab","selectedFile","B","kB","MB","GB","TB","PB","EB","ZB","YB","Placeholder","FileMissingIcon","fileMissing","FileMissing","FileInfo","FileNotSelected","Image","srcUrl","alt","setSrcUrl","noFile","setNoFile","fileStorage","url","handleClick","formikMuiErrors","formik","helperText","FormikTextField","fieldProps","values","setTouched","touched","FormikAutocomplete","handleKeyDown","Autocomplete","multiple","options","getOptionLabel","option","freeSolo","clearOnBlur","setFieldValue","renderInput","FormikSelect","fullWidth","Select","FormHelperText","FormikCheckbox","FormikSlider","slider","Slider","requestAnimationFrame","valueLabelDisplay","marks","FormikImageField","formikTouched","validationSchema","yup","ensure","positive","integer","submitting","setSubmitting","useFormik","validateOnChange","validateOnBlur","onSubmit","log","useBeforeunload","event","handleSubmit","form","step","when","NotFound404","centered","RoundTable","useRouteMatch","TableContainer","Paper","table","Table","TableBody","row","TableRow","borderBottom","TableCell","scope","rowName","tableCell","ButtonBase","buttonBase","align","colspan","Cell","wp","sortedQuestions","questionURL","border","cell1","minWidth","TableHead","hover","tableRow","strikethrough","colSpan","ClickIsolator","expandId","themeName","setThemeName","handleDelete","handleRemoveTheme","handleChangeThemeName","newThemeName","toString","Accordion","expanded","isExpand","setExpand","AccordionSummary","expandIcon","AccordionDetails","ThemesEditing","Theme","handleAddTheme","addTheme","setThemes","found","setFound","roundThemes","updateThemes","clone","questionPriceHint","questionTypesHint","realPriceHint","realPriceStepperHint","realThemeHint","bagcatRealPriceTypeHint","scenarioHint","WithHint","Tooltip","FormFields","numberFieldProps","InputProps","inputProps","grouped","ScenarioEvent","setDuration","eventData","setEventData","onDelete","onChangeDuration","eventDuration","onChangeData","step0_1","Decimal","times","toNumber","step0_5","step1","step5","durationMarks","_label","closestToMarks","itemType","voice","say","Fade","in","toFixed","details","defaultValue","valueLabelFormat","multiline","rows","setScenario","newEventValue","setNewEventValue","scenarioUpdateTimeout","setScenarioUpdateTimeout","params","useParams","clearTimeout","scenarioUpdateQueue","updateQuestionScenario","newScenario","addEvent","displayEmpty","NoScenario","priceSchema","realprice","realtheme","transferToSelf","detailsDisclosure","newQuestion","delta","newDelta","findRegularity","getNextPrice","validate","checkRealPrice","checkNumber","noValueError","zeroError","isSubmitting","submit","isValidating","notFound","setNotFound","setQuestion","exact","routeChanged","pathParts","createTheme","mode","primary","main","App","sipackerStore","ThemeProvider","basename","process","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.2034ef52.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"link\":\"styles_link__iWnvj\",\"toolbar\":\"styles_toolbar__viJ4P\",\"container\":\"styles_container__3KW9G\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"buttons\":\"styles_buttons__Srfpa\",\"delete\":\"styles_delete__1GXPK\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"noItems\":\"styles_noItems__19dBE\",\"handle\":\"styles_handle__DHO5p\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"toolbar\":\"styles_toolbar__1dso8\",\"text\":\"styles_text__16Cv2\",\"hint\":\"styles_hint__2upGK\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__1vfWp\",\"form\":\"styles_form__LUKmR\",\"info\":\"styles_info__1RrDx\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"navigation\":\"styles_navigation__b3eL_\",\"logoContainer\":\"styles_logoContainer__3hxi2\",\"logo\":\"styles_logo__Triy9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__2Npq2\",\"field\":\"styles_field__1Q5KE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"title\":\"styles_title__3sESC\",\"dialog\":\"styles_dialog__2HYt8\",\"tabs\":\"styles_tabs__3oGTF\",\"files\":\"styles_files__gJLVp\",\"filters\":\"styles_filters__1TEOe\",\"text\":\"styles_text__3q7xF\",\"checkbox\":\"styles_checkbox__2-7wb\",\"list\":\"styles_list__QxZ1P\",\"content\":\"styles_content__3DAbo\",\"packDivider\":\"styles_packDivider__1eh-l\",\"grid\":\"styles_grid__2YaAc\",\"item\":\"styles_item__3OyXq\",\"itemInner\":\"styles_itemInner__j4sTM\",\"preview\":\"styles_preview__2vnda\",\"foreground\":\"styles_foreground__3OtLE\",\"background\":\"styles_background__2v4Hw\",\"fileName\":\"styles_fileName__Y6Kge\",\"button\":\"styles_button__2BATH\",\"noFilesYet\":\"styles_noFilesYet__1Hcst\",\"hint\":\"styles_hint__1anpH\",\"upload\":\"styles_upload__i5SMD\",\"dropzone\":\"styles_dropzone__7zJs4\",\"flex\":\"styles_flex__1oz2f\",\"supportedTypes\":\"styles_supportedTypes__UNDK8\",\"uploadingFiles\":\"styles_uploadingFiles__3pQjA\",\"uploadingScreen\":\"styles_uploadingScreen__3l-EZ\",\"uploadingCaption\":\"styles_uploadingCaption__2Thca\",\"caption\":\"styles_caption__3MYtC\",\"errors\":\"styles_errors__3zZJK\",\"delete\":\"styles_delete__GzwCF\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"roundsPage\":\"styles_roundsPage__2xjXR\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"styles_item__2_EzC\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"slider\":\"styles_slider__2_T4D\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"centered\":\"styles_centered__23ouW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__2xIAm\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"packsList\":\"styles_packsList__3_FVk\",\"hoverUnfocused\":\"styles_hoverUnfocused__QnvyG\",\"packBase\":\"styles_packBase__1LyE6\",\"hoverFocused\":\"styles_hoverFocused__3wnZX\",\"loading\":\"styles_loading__3SVRQ\",\"pack\":\"styles_pack__P7r43\",\"info\":\"styles_info__2vfvj\",\"visibilityDelay\":\"styles_visibilityDelay__2WqMA\",\"newPack\":\"styles_newPack__SHDep\",\"skeleton\":\"styles_skeleton__2LQD-\",\"upload\":\"styles_upload__nOCvw\",\"thumbnail\":\"styles_thumbnail__1aU0y\",\"pictureContainer\":\"styles_pictureContainer__3Ksvb\",\"name\":\"styles_name__10d11\",\"time\":\"styles_time___bQuG\",\"backdrop\":\"styles_backdrop__2CHGI\",\"visible\":\"styles_visible__zmC7_\",\"alert\":\"styles_alert__1bU9a\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__10MD0\",\"hint\":\"styles_hint__2rDGF\",\"grouped\":\"styles_grouped__2K5-H\",\"addEvent\":\"styles_addEvent__3LcHk\",\"item\":\"styles_item__22gS9\",\"itemType\":\"styles_itemType__12yvw\",\"spacing\":\"styles_spacing__AWfQV\",\"details\":\"styles_details__2X22Q\",\"duration\":\"styles_duration__1EfuX\",\"time\":\"styles_time__CfIYV\",\"submit\":\"styles_submit__39tBr\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__3R_IO\",\"list\":\"styles_list__V6atM\",\"done\":\"styles_done__T3LaX\",\"marker\":\"styles_marker__1v4R9\",\"lineBefore\":\"styles_lineBefore__3FZJa\",\"lineAfter\":\"styles_lineAfter__2tf62\",\"hidden\":\"styles_hidden__QZJee\",\"bullet\":\"styles_bullet__3qHV-\",\"link\":\"styles_link__3mTg0\",\"caption\":\"styles_caption__3cP02\",\"line\":\"styles_line__JJEXr\",\"text\":\"styles_text__1tFeb\",\"progress\":\"styles_progress__2qcQG\",\"progressBar\":\"styles_progressBar__1AayW\"};","import PropTypes from 'prop-types'\nimport xmlJS from 'xml-js'\n\nexport const componentsPropTypes = {\n  pack: PropTypes.shape({\n    uuid: PropTypes.string,\n    name: PropTypes.string,\n    creationTime: PropTypes.number,\n    date: PropTypes.string,\n    thumbnail: PropTypes.string\n  })\n}\n\nexport const format = {\n  xmlVersion: '1.0',\n  encoding: 'utf-8',\n  latestVersion: 4\n}\n\nexport const formatDefaults = {\n  contentTypes: xmlJS.js2xml({\n    _declaration: {\n      _attributes: {\n        version: format.xmlVersion,\n        encoding: format.encoding\n      }\n    },\n    Types: {\n      _attributes: {\n        xmlns: 'http://schemas.openxmlformats.org/package/2006/content-types',\n      },\n      Default: {\n        _attributes: {\n          Extension: 'xml',\n          ContentType: 'si/xml'\n        }\n      }\n    }\n  }, { compact: true })\n}\n\nexport const uuidRegex = '\\\\b[0-9a-f]{8}\\\\b-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-\\\\b[0-9a-f]{12}\\\\b'\n","import Dexie from 'dexie'\n\nexport const init = () => {\n  const db = new Dexie('sipacker')\n  db.version(1).stores({\n    packs: [\n      'uuid'\n      // also: name, version, over18, date, publisher, difficulty, logo, language, tags, authors, comment\n    ].join(', '),\n    files: [\n      'fileURI',\n      'type',\n      'hash',\n      'packUUID',\n      'addedAt'\n      // also: filename, blob\n    ].join(', ')\n  })\n  return db\n}\n","import { init } from './indexeddb'\n\nexport async function loadLocalPack(packUUID) {\n  const db = init()\n  let pack = await db.packs.get(packUUID)\n  return pack ?? null\n}\n\nexport async function loadLocalPacks() {\n  const db = init()\n  const packs = await db.packs.toArray()\n  return packs\n}\n\nexport async function saveLocalPack(pack) {\n  const db = init()\n  await db.packs.put(pack)\n}\n\nexport async function deleteLocalPack(packUUID) {\n  const db = init()\n  await db.packs.delete(packUUID)\n}\n","import SparkMD5 from 'spark-md5'\n\nexport default function hashFile(file) {\n  return new Promise((resolve, reject) => {\n    // from https://github.com/satazor/js-spark-md5#hash-a-file-incrementally\n    const blobSlice = File.prototype.slice || File.prototype.mozSlice || File.prototype.webkitSlice\n    const chunkSize = 1024*1024*2\n    const chunks = Math.ceil(file.size / chunkSize)\n    const spark = new SparkMD5.ArrayBuffer()\n    const fileReader = new FileReader()\n\n    let currentChunk = 0\n\n    fileReader.onload = e => {\n      spark.append(e.target.result)\n      currentChunk++\n\n      if (currentChunk < chunks) {\n        loadNext()\n      } else {\n        resolve(spark.end())\n      }\n    }\n\n    fileReader.onerror = () => reject('Unable to hash file')\n\n    const loadNext = () => {\n      const start = currentChunk * chunkSize\n      const end = ((start + chunkSize) >= file.size) ? file.size : start + chunkSize\n\n      fileReader.readAsArrayBuffer(blobSlice.call(file, start, end))\n    }\n\n    loadNext()\n  })\n}\n","import hashFile from './hashFile'\nimport { nanoid } from 'nanoid'\nimport { init } from '../indexeddb'\nimport drawTransparentPattern from 'checkerboardjs'\n\nconst mimeTypes = {\n  image: ['image/png', 'image/jpeg'],\n  audio: ['audio/mpeg', 'audio/wav', 'audio/ogg'],\n  video: ['video/mpeg']\n}\nexport const allowedFileTypes = [...mimeTypes.image, ...mimeTypes.audio, ...mimeTypes.video]\nexport async function saveFile(blob, packUUID) {\n  if(!allowedFileTypes.includes(blob.type)) { throw 'Mime-type is not supported' }\n  if(!blob.filename) { throw 'Blob instance must have filename propery' }\n\n  const db = init()\n  const hash = await hashFile(blob)\n\n  let results = await db.files.where({ packUUID, hash }).toArray()\n  if(results.length) throw 'File with such hash already exist'\n\n  const type = Object.entries(mimeTypes).find(\n    ([,mimeType]) => mimeType.some(type => type === blob.type)\n  )[0]\n\n  const fileURI = nanoid()\n  const fileObject = {\n    fileURI,\n    type,\n    blob,\n    fileName: blob.filename,\n    hash,\n    packUUID,\n    addedAt: Date.now()\n  }\n\n  switch(type) {\n    case 'image':\n      fileObject.miniature = await generateMiniature(blob)\n      break\n  }\n\n  await db.files.put(fileObject)\n  return fileURI\n}\n\nconst maxSize = 100\nasync function generateMiniature(blob) {\n  const img = document.createElement('img')\n  const src = URL.createObjectURL(blob)\n  img.src = src\n  await new Promise(resolve => img.onload = resolve)\n  const { width, height } = img\n  const size = Math.min(width, height, maxSize)\n  let newWidth = size, newHeight = size\n  if(width > height) newHeight = newWidth*height/ width\n  else newWidth = newHeight*width/height\n\n  const canvas = document.createElement('canvas')\n  canvas.width = newWidth\n  canvas.height = newHeight\n  drawTransparentPattern(canvas)\n  const ctx = canvas.getContext('2d')\n  ctx.drawImage(img, 0, 0, canvas.width, canvas.height)\n  const miniature = await new Promise(resolve => canvas.toBlob(resolve))\n  URL.revokeObjectURL(src)\n  return miniature\n}\n","import { init } from '../indexeddb'\nimport { loadLocalPacks } from 'localStorage/localPacks'\nexport { allowedFileTypes, saveFile } from './saveFile'\n\nexport async function getFile(fileURI) {\n  const db = init()\n  let file = await db.files.get(fileURI)\n  return file ?? null\n}\n\nexport async function getAllURIsFromPack(packUUID) {\n  const db = init()\n  return await db.files.where({ packUUID }).primaryKeys()\n}\n\nexport async function getPacksIDs() {\n  const db = init()\n  const packIDs = await db.files.toArray()\n  return packIDs.map(({ packUUID }) => packUUID)\n}\n\nexport async function getDeletedPacks() {\n  let existingPacks = await loadLocalPacks()\n  existingPacks = existingPacks.map(({ uuid }) => uuid)\n  const allPacks = await getPacksIDs()\n  return allPacks.filter(pack => !existingPacks.includes(pack))\n}\n\nexport async function deleteFile(fileURI) {\n  const db = init()\n  await db.files.where('fileURI').equals(fileURI).delete()\n}\n\nconst size = 20\nexport async function getRecent(filters) {\n  const db = init()\n  if(filters.includes('null')){\n    filters.splice(filters.indexOf('null'), 1)\n    const deletedPacks = await getDeletedPacks()\n    filters.push(...deletedPacks)\n  }\n  const files = await db.files.where('packUUID').anyOf(filters)\n    .limit(size)\n    .offset(0)\n    .reverse()\n    .sortBy('addedAt')\n  return files\n}\n\nexport async function deleteFilesOfPack(packUUID) {\n  const db = init()\n  const files = await db.files.where({ packUUID }).primaryKeys()\n  await db.files.bulkDelete(files)\n}\n","export default function fileRenderingReducer(state = {}, action) {\n  switch (action.type) {\n    case 'fileRendering/fileRenderingStarted':\n      return state[action.fileURI] ? { ...state } :  { ...state, [action.fileURI]: action.callback }\n\n    case 'fileRendering/fileRenderingStopped':\n      return removeFileURI(state, action.fileURI)\n\n    case 'fileRendering/fileUnlinked':\n      if(!Object.keys(state).includes(action.fileURI)) return state\n      const callback = state[action.fileURI]\n      callback && callback()\n      return removeFileURI(state, action.fileURI)\n\n    case 'fileRendering/setFileUnlinkCallback':\n      return changeProperty(state, action.fileURI, action.callback)\n\n    default:\n      return state\n  }\n}\n\nfunction removeFileURI(state, fileURI) {\n  const newState = { ...state }\n  delete newState[fileURI]\n  return newState\n}\n\nfunction changeProperty(state, propertyName, newValue) {\n  const newState = { ...state }\n  newState[propertyName] = newValue\n  return newState\n}\n","import { combineReducers, createStore } from 'redux'\nimport packReducer from './packReducer'\nimport dashboardReducer from './dashboardReducer'\nimport fileRenderingReducer from './fileRendering'\nimport menuReducer from './menuReducer'\n\nexport default createStore(combineReducers({\n  pack: packReducer,\n  dashboard: dashboardReducer,\n  fileRendering: fileRenderingReducer,\n  menu: menuReducer\n}))\n","export default function packReducer(state = null, action) {\n  switch (action.type) {\n    case 'pack/load':\n      return action.pack\n    default:\n      return state\n  }\n}\n","export default function dashboardReducer(state = null, action) {\n  switch (action.type) {\n    case 'dashboard/setUploading':\n      return { ...state, uploading: action.uploading }\n    default:\n      return state\n  }\n}\n","export default function menuReducer(state = null, action) {\n  switch (action.type) {\n    case 'menu/setPosition':\n      return { ...state, position: action.position }\n    default:\n      return state\n  }\n}\n","import { getFile } from '../fileStorage'\nimport { nanoid } from 'nanoid'\n\nexport default class FileResolver {\n  constructor(zip) {\n    this.zip = zip\n    this.resolvedFiles = {}\n    this.folders = {}\n    this.warnings = []\n  }\n\n  getDir(folder) {\n    if(!this.folders[folder]) this.folders[folder] = this.zip.folder(folder)\n    return this.folders[folder]\n  }\n\n  async resolve(fileURI, error) {\n    if(!fileURI) return\n    // this.getDir('Audio')\n    // this.getDir('Video')\n    const file = await getFile(fileURI)\n    if(!file) throw `  :   ${error}`\n    if(file.blob.size > 1024*1024) this.warnings.push(` ${file.fileName}   1 `)\n\n    let id, extension\n    switch(file.type) {\n      case 'image':\n        id = nanoid()\n        while(Object.keys(this.resolvedFiles).includes(id))\n          id = nanoid()\n\n        this.resolvedFiles[id] = true\n        const images = this.getDir('Images')\n        extension = {'image/png': 'png', 'image/jpeg': 'jpg'}[file.blob.type]\n        images.file(`${id}.${extension}`, file.blob)\n    }\n    return `@${id}.${extension}`\n  }\n}\n","import { createBrowserHistory } from 'history'\n\nexport const removeUndefined = object => Object.fromEntries(Object.entries(object).filter(([, val]) => val !== undefined))\n\nexport const history = createBrowserHistory()\n\nexport const emptyFunc = () => {}\n\nexport const formatDate = dateTime => new Intl.DateTimeFormat('ru-RU', {\n  year: 'numeric',\n  month: 'long',\n  day: 'numeric',\n  hour: 'numeric',\n  minute: 'numeric',\n  seconds: 'numeric'\n}).format(dateTime)\n\nexport const mapPackState = state => ({ pack: state.pack })\n\nexport const questionTypes = {\n  'simple': '',\n  'auction': '  ()',\n  'cat': ' ',\n  'bagcat': '  ',\n  'sponsored': ' '\n}\n\nexport const initValues = (schema, object) => {\n  const initialValues = object ?? {}\n  const fields = Object.keys(schema.fields)\n  const defaultValues = {\n    'number': 0,\n    'string': '',\n    'boolean': false\n  }\n  fields.forEach(key => initialValues[key] = object ? object[key] : defaultValues[schema.fields[key].type])\n  return initialValues\n}\n\n\nexport const hasQuestionInEachTheme = pack => Boolean(\n  pack.rounds.length &&\n  pack.rounds.every(round =>\n    round.themes.every(theme =>\n      theme.questions.length\n    )\n  )\n)\n\nexport const hasThemeInEachRound = pack => Boolean(\n  pack.rounds.length &&\n  pack.rounds.every(round =>\n    round.themes.length\n  )\n)\n\nexport const has5ThemesInEachRound = pack => Boolean(\n  pack.rounds.length &&\n  pack.rounds.every(round =>\n    round.themes.length >= 5\n  )\n)\n\nexport const hasAtLeast25Questions = pack => Boolean(\n  pack.rounds.reduce(\n    (prev, round) => prev+round.themes.reduce(\n      (prev, theme) => prev+theme.questions.length, 0\n    ), 0\n  ) >= 25\n)\n\nexport const hasQuestionWithAuction = pack => Boolean(\n  pack.rounds.some(\n    round => round.themes.some(\n      theme => theme.questions.some(\n        question => question.type === 'auction'\n      )\n    )\n  )\n)\n\nexport const hasQuestionWithBagCat = pack => Boolean(\n  pack.rounds.some(\n    round => round.themes.some(\n      theme => theme.questions.some(\n        question => question.type === 'bagcat'\n      )\n    )\n  )\n)\n\nexport const hasScenarioInEachQuestion = pack => Boolean(\n  pack.rounds.length &&\n  pack.rounds.every(\n    round => round.themes.every(\n      theme => theme.questions.every(\n        question => question.scenario?.length\n      )\n    )\n  )\n)\n","import JSZip from 'jszip'\nimport { saveLocalPack } from 'localStorage/localPacks'\nimport { removeUndefined } from 'utils'\nimport xmlJS from 'xml-js'\n\nexport default async function parse(blob) {\n  try {\n    const zip = await JSZip.loadAsync(blob)\n    const contentXML = zip.files['content.xml']\n    if(!contentXML) { return { error: 'noContentXML' }}\n    const packContent = await contentXML.async('string')\n    const content = xmlJS.xml2js(packContent)\n\n    const n = (object, property) => {\n      const target = object.elements.filter(e => e.name === property)\n      return target && target[0]\n    }\n\n    const mapText = array => {\n      if(!array) { return undefined }\n      return array.elements.map(t => t.elements[0].text)\n    }\n\n    const packageTag = n(content, 'package')\n    const { id, name, version, difficulty, restriction, date, publisher, logo, language } = packageTag.attributes\n    const infoTag = n(packageTag, 'info')\n    const authors = mapText(n(infoTag, 'authors'))\n    const tags = mapText(n(packageTag, 'tags'))\n\n    const pack = removeUndefined({\n      uuid: id,\n      name,\n      version: Number(version),\n      difficulty: Number(difficulty),\n      creationTime: Date.now(),\n      over18: restriction === '18+',\n      date,\n      authors: authors.join(','),\n      publisher,\n      tags: tags?.join(','),\n      logo,\n      language: language || ''\n    })\n    await saveLocalPack(pack)\n    return true\n  } catch(e) {\n    return { error: e }\n  }\n}\n","import JSZip from 'jszip'\nimport { format, formatDefaults } from 'consts'\nimport xmlJS from 'xml-js'\nimport FileResolver from './fileResolver'\nexport { default as parse } from './parser'\nimport { hasQuestionInEachTheme, hasThemeInEachRound, hasScenarioInEachQuestion } from 'utils'\nimport xmlescape from 'xml-escape'\n\nconst bom = '\\uFEFF'\n\nconst packErrors = {\n  noAuthor: '       ',\n  noLanguage: '     ',\n  noRounds: '    ',\n  noTheme: '       ',\n  noQuestion: '          ',\n  noScenario: '              ',\n}\nexport async function check(pack) {\n  let errors = []\n  if(!pack.authors) errors.push(packErrors.noAuthor)\n  if(!pack.language) errors.push(packErrors.noLanguage)\n  if(!pack.rounds.length) errors.push(packErrors.noRounds)\n  else if(!hasThemeInEachRound(pack)) errors.push(packErrors.noTheme)\n  else if(!hasQuestionInEachTheme(pack)) errors.push(packErrors.noQuestion)\n  else if(!hasScenarioInEachQuestion(pack)) errors.push(packErrors.noScenario)\n\n  return errors\n}\n\nfunction questionType(question, currentTheme) {\n  if(question.type !== 'simple') {\n    return [{\n      type: 'element',\n      name: 'type',\n      attributes: {\n        name: question.type\n      },\n      elements: questionParams(question, currentTheme)\n    }]\n  } else { return [] }\n}\n\nfunction questionParams(question, currentTheme){\n  const params = {\n    cat: ['theme', 'cost'],\n    auction: [],\n    bagcat: ['theme', 'cost', 'self', 'knows'],\n    sponsored: []\n  }\n  const properties = {\n    theme: 'realtheme',\n    cost: 'realprice',\n    self: 'transferToSelf',\n    knows: 'detailsDisclosure'\n  }\n  const paramsName = params[question.type]\n  return paramsName.map(param => {\n    let text = question[properties[param]]\n    if(param === 'cost' && question.type === 'bagcat') {\n      switch(question.questionPriceType) {\n        case 'minMax':\n          text = 0\n          break\n\n        case 'byPlayer':\n          text = `[${question.realpriceFrom};${question.realpriceTo}]/${question.realpriceStep}`\n          break\n      }\n    }\n    if(param === 'theme') text = xmlescape(text)\n    if(param === 'theme' && text === undefined) text = xmlescape(currentTheme)\n    if(param === 'self') text = String(Boolean(text))\n    return (\n      {\n        type: 'element',\n        name: 'param',\n        attributes: {\n          name: param\n        },\n        elements: [{ type: 'text', text }]\n      }\n    )\n  })\n}\n\nexport async function generate(pack) {\n  const zip = new JSZip()\n\n  const texts = zip.folder('Texts')\n  texts.file('authors.xml', bom+'<?xml version=\"1.0\" encoding=\"utf-8\"?><Authors />')\n  texts.file('sources.xml', bom+'<?xml version=\"1.0\" encoding=\"utf-8\"?><Sources />')\n\n  zip.file('[Content_Types].xml', bom+formatDefaults.contentTypes)\n\n  const files = new FileResolver(zip)\n\n  const packContent = {\n    declaration: {\n      attributes: {\n        version: format.xmlVersion,\n        encoding: format.encoding\n      }\n    },\n    elements: [\n      {\n        type: 'comment',\n        comment: 'This package was generated using SIPacker  free open-source online tool for generating SIGame packs. Feel free to leave feedback on https://github.com/VityaSchel/SIPacker'\n      },\n      {\n        type: 'element',\n        name: 'package',\n        attributes: {\n          xmlns: 'http://vladimirkhil.com/ygpackage3.0.xsd',\n          id: pack.uuid,\n          name: xmlescape(pack.name),\n          version: pack.version,\n          restriction: pack.over18 ? '18+' : undefined,\n          date: pack.date,\n          publisher: xmlescape(pack.publisher),\n          difficulty: pack.difficulty,\n          logo: await files.resolve(pack.logo, ' '),\n          language: pack.language,\n          generator: 'sipacker'\n        },\n        elements: [\n          ...pack.tags ? [\n            {\n              type: 'element',\n              name: 'tags',\n              elements: pack.tags.map(tag => (\n                {\n                  type: 'element',\n                  name: 'tag',\n                  elements: [{ type: 'text', text: xmlescape(tag) }]\n                }\n              ))\n            }\n          ] : [],\n          {\n            type: 'element',\n            name: 'info',\n            elements: [\n              {\n                type: 'element',\n                name: 'authors',\n                elements: pack.authors.map(author => (\n                  {\n                    type: 'element',\n                    name: 'author',\n                    elements: [{ type: 'text', text: xmlescape(author) }]\n                  }\n                ))\n              },\n              ...pack.comment ? [\n                {\n                  type: 'element',\n                  name: 'comments',\n                  elements: [\n                    {\n                      type: 'text',\n                      text: xmlescape(pack.comment)\n                    }\n                  ]\n                }\n              ] : []\n            ]\n          },\n          {\n            type: 'element',\n            name: 'rounds',\n            elements: await Promise.all(pack.rounds.map(async round => (\n              {\n                type: 'element',\n                name: 'round',\n                attributes: {\n                  name: xmlescape(round.name)\n                },\n                elements: [\n                  {\n                    type: 'element',\n                    name: 'themes',\n                    elements: await Promise.all(round.themes.map(async theme => (\n                      {\n                        type: 'element',\n                        name: 'theme',\n                        attributes: {\n                          name: xmlescape(theme.name)\n                        },\n                        elements: [\n                          {\n                            type: 'element',\n                            name: 'questions',\n                            elements: await Promise.all(theme.questions.map(async question => (\n                              {\n                                type: 'element',\n                                name: 'question',\n                                attributes: {\n                                  price: question.price\n                                },\n                                elements: [\n                                  ...questionType(question, theme.name),\n                                  {\n                                    type: 'element',\n                                    name: 'scenario',\n                                    elements: await Promise.all(question.scenario.map(async scenarioEvent => (\n                                      {\n                                        type: 'element',\n                                        name: 'atom',\n                                        attributes: {\n                                          type: scenarioEvent.type,\n                                          time: scenarioEvent.duration\n                                        },\n                                        elements: !['say', 'marker'].includes(scenarioEvent.type) ? [\n                                          {\n                                            type: 'text',\n                                            text: {\n                                              text: xmlescape(scenarioEvent.data.text ?? '').replaceAll('\\n', '\\\\n'),\n                                              image: await files.resolve(\n                                                scenarioEvent.data.imageField,\n                                                `   ${question.price}   ${theme.name}   ${round.name}`\n                                              ),\n                                            }[scenarioEvent.type]\n                                          }\n                                        ] : []\n                                      }\n                                    )))\n                                  },\n                                  {\n                                    type: 'element',\n                                    name: 'right',\n                                    elements: question.correctAnswers.map(answer => (\n                                      {\n                                        type: 'element',\n                                        name: 'answer',\n                                        elements: [{ type: 'text', text: xmlescape(answer) }]\n                                      }\n                                    ))\n                                  },\n                                  {\n                                    type: 'element',\n                                    name: 'wrong',\n                                    elements: question.incorrectAnswers?.map(answer => (\n                                      {\n                                        type: 'element',\n                                        name: 'answer',\n                                        elements: [{ type: 'text', text: xmlescape(answer) }]\n                                      }\n                                    ))\n                                  }\n                                ]\n                              }\n                            )))\n                          }\n                        ]\n                      }\n                    )))\n                  }\n                ]\n              }\n            )))\n          }\n        ]\n      }\n    ]\n  }\n  const content = xmlJS.js2xml(packContent)\n  zip.file('content.xml', bom+content)\n\n  const warnings = files.warnings\n\n  const zipInBlob = await zip.generateAsync({ type: 'blob', compression: 'DEFLATE' })\n  return { result: zipInBlob, warnings }\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport styles from '../styles.module.scss'\nimport cx from 'classnames'\nimport Snackbar from '@mui/material/Snackbar'\nimport Slide from '@mui/material/Slide'\nimport Alert from '@mui/material/Alert'\nimport { connect } from 'react-redux'\nimport store from '../../../reducers'\nimport { MdFileUpload } from 'react-icons/md'\nimport Dropzone from 'react-dropzone'\nimport { parse as parsePackGenerator } from 'localStorage/packGenerator'\n\nconst SlideTransition = props => <Slide {...props} direction=\"right\" />\n\nfunction Upload(props) {\n  const [entered, setEntered] = React.useState(false)\n  const [content, setContent] = React.useState([])\n\n  const handleDrop = acceptedFiles => {\n    setEntered(false)\n    if(!acceptedFiles) { return }\n    for (let pack of acceptedFiles) {\n      let previousState = props.dashboard?.uploading ?? []\n      const id = Date.now()\n      props.dispatch({ type: 'dashboard/setUploading', uploading: previousState.concat({ id, name: pack.name }) })\n      parsePackGenerator(pack).then(result => {\n        if(result.error) {\n          const error = {\n            noContentXML: '   content.xml  . ,     , ,     .'\n          }[result.error]\n          const date = Date.now()\n          setContent(content.concat({ date, text: `    ${pack.name}: ${error}` }))\n        } else {\n          props.reloadPacks()\n        }\n        props.dispatch({ type: 'dashboard/setUploading', uploading: store.getState().pack?.uploading.filter(pack => id !== pack.id) })\n      })\n    }\n  }\n\n  const handleEnter = () => setEntered(true)\n  const handleLeave = () => setEntered(false)\n\n  React.useEffect(() => {\n    const interval = setInterval(() => {\n      setContent(content.filter(c => c.date >= Date.now()-1000*5))\n    }, 1000)\n    return () => clearInterval(interval)\n  }, [content])\n\n  return (\n    <>\n      <Dropzone\n        onDragEnter={handleEnter}\n        onDragLeave={handleLeave}\n        onDrop={handleDrop}\n        accept={['.siq']}\n      >\n        {({getRootProps, getInputProps}) => (\n          <div className={cx(\n            [styles.packBase, styles.newPack, styles.upload],\n            { [styles.dragOver]: entered }\n          )} {...getRootProps()}>\n            <input {...getInputProps()} />\n            <span><MdFileUpload />   </span>\n          </div>\n        )}\n      </Dropzone>\n      <div className={cx(styles.backdrop, { [styles.visible]: entered })} />\n      <Snackbar\n        open={content.length}\n        onClose={() => setContent([])}\n        TransitionComponent={SlideTransition}\n      >\n        <Alert severity=\"error\" className={styles.alert}>\n          {content.map((c, i) => <p key={i}>{c.text}</p>)}\n        </Alert>\n      </Snackbar>\n    </>\n  )\n}\n\nUpload.propTypes = {\n  dashboard: PropTypes.object,\n  dispatch: PropTypes.func,\n  reloadPacks: PropTypes.func\n}\n\nexport default connect(state => ({ dashboard: state.dashboard }))(Upload)\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport Menu from '@mui/material/Menu'\nimport MenuItem from '@mui/material/MenuItem'\nimport ListItemIcon from '@mui/material/ListItemIcon'\nimport ListItemText from '@mui/material/ListItemText'\n\nexport const ContextMenuActions = React.createContext({})\nfunction ContextMenu(props) {\n  const [items, setItems] = React.useState()\n\n  const contextMenu = {\n    open(e, items) {\n      if(props.menu?.position) return true\n      else e.preventDefault()\n      setItems(items)\n      props.dispatch({ type: 'menu/setPosition', position: [e.clientX, e.clientY] })\n      return false\n    }\n  }\n\n  const close = e => {\n    e?.preventDefault()\n    props.dispatch({ type: 'menu/setPosition', position: null })\n  }\n\n  const handleSelect = action => e => {\n    e.stopPropagation()\n    action()\n    close()\n  }\n\n  return (\n    <>\n      <ContextMenuActions.Provider value={contextMenu}>\n        {props.children}\n      </ContextMenuActions.Provider>\n      {\n        ReactDOM.createPortal(\n          <Menu\n            open={props.menu?.position}\n            anchorReference=\"anchorPosition\"\n            anchorPosition={props.menu?.position && { top: props.menu.position[1], left: props.menu.position[0] }}\n            onClose={close}\n          >\n            {items?.map((item, i) =>\n              <MenuItem onClick={handleSelect(item.action)} key={i}>\n                <ListItemIcon>\n                  {item.icon}\n                </ListItemIcon>\n                <ListItemText>{item.name}</ListItemText>\n              </MenuItem>\n            )}\n          </Menu>,\n          document.body\n        )\n      }\n    </>\n  )\n}\n\nContextMenu.displayName = 'ContextMenu'\nContextMenu.propTypes = {\n  dispatch: PropTypes.func,\n  menu: PropTypes.array,\n  name: PropTypes.string,\n  children: PropTypes.func,\n}\n\nexport default connect(state => ({ menu: state.menu }))(ContextMenu)\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport Button from '@mui/material/Button'\nimport DialogContentText from '@mui/material/DialogContentText'\nimport DialogTitle from '@mui/material/DialogTitle'\nimport DialogContent from '@mui/material/DialogContent'\nimport DialogActions from '@mui/material/DialogActions'\nimport MuiDialog from '@mui/material/Dialog'\nimport Checkbox from '@mui/material/Checkbox'\nimport FormControlLabel from '@mui/material/FormControlLabel'\n\nlet okCallback\nconst ConfirmationDialog = React.forwardRef((props, ref) => {\n  const [open, setOpen] = React.useState(false)\n  const [text, setText] = React.useState()\n  const [confirmText, setConfirmText] = React.useState('')\n  const [checkboxText, setCheckboxText] = React.useState('')\n  const [checkboxValue, setCheckboxValue] = React.useState(true)\n\n  const handleAction = result => {\n    setOpen(false)\n    okCallback({ confirmed: result, checked: checkboxValue })\n  }\n\n  React.useImperativeHandle(ref, () => ({\n    open(text, confirmText, checkboxText) {\n      return new Promise(resolve => {\n        okCallback = resolve\n        setOpen(true)\n        setText(text)\n        setConfirmText(confirmText)\n        setCheckboxText(checkboxText)\n      })\n    }\n  }))\n\n  return (\n    <MuiDialog\n      maxWidth=\"xs\"\n      open={open}\n      onClose={() => handleAction(false)}\n    >\n      <DialogTitle>{props.title}</DialogTitle>\n      <DialogContent>\n        <DialogContentText>\n          {text && <p>{text}</p>}\n          {props.children}\n          {checkboxText && <FormControlLabel control={\n            <Checkbox\n              defaultChecked\n              value={checkboxValue}\n              onChange={e => setCheckboxValue(e.target.checked)}\n            />\n          } label={checkboxText} />}\n        </DialogContentText>\n      </DialogContent>\n      <DialogActions>\n        <Button autoFocus onClick={() => handleAction(false)} color=\"primary\">\n          \n        </Button>\n        <Button onClick={() => handleAction(true)} color=\"primary\">\n          {confirmText ?? ''}\n        </Button>\n      </DialogActions>\n    </MuiDialog>\n  )\n})\n\nConfirmationDialog.propTypes = {\n  title: PropTypes.string,\n  children: PropTypes.node\n}\nConfirmationDialog.displayName = 'ConfirmationDialog'\nexport default ConfirmationDialog\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport ConfirmationDialog from 'components/ConfirmationDialog'\nimport { deleteFilesOfPack, getAllURIsFromPack } from 'localStorage/fileStorage'\nimport { deleteLocalPack } from 'localStorage/localPacks'\nimport { useHistory } from 'react-router-dom'\nimport store from 'reducers/index'\n\nconst DeleteConfirmationDialog = React.forwardRef((props, ref) => {\n  const confirmationDialogRef = React.useRef()\n  const history = useHistory()\n\n  React.useImperativeHandle(ref, () => ({\n    async confirmPackDeletion(packUUID) {\n      const { confirmed, checked } = await confirmationDialogRef.current\n        .open(' ,    ?    .',\n          '',\n          '   '\n        )\n      const deleteFiles = checked\n      if(confirmed) {\n        if(deleteFiles) {\n          const fileURIs = await getAllURIsFromPack(packUUID)\n          fileURIs.forEach(fileURI => store.dispatch({ type: 'fileRendering/fileUnlinked', fileURI }))\n          await deleteFilesOfPack(packUUID)\n        }\n        await deleteLocalPack(packUUID)\n        history.push('/')\n      }\n      return confirmed\n    },\n\n    async confirmRoundDeletion() {\n      const { confirmed } = await confirmationDialogRef.current\n        .open(' ,    ?     .', '')\n      return confirmed\n    },\n\n    async confirmDeleteQuestion() {\n      const { confirmed } = await confirmationDialogRef.current\n        .open(' ,    ?', '')\n      return confirmed\n    }\n  }))\n\n  return (\n    <ConfirmationDialog ref={confirmationDialogRef} />\n  )\n})\n\nDeleteConfirmationDialog.propTypes = {\n  title: PropTypes.string,\n  description: PropTypes.string\n}\n\nDeleteConfirmationDialog.displayName = 'DeleteConfirmationDialog'\nexport default DeleteConfirmationDialog\n","import React from 'react'\nimport Button from '@mui/material/Button'\nimport DialogTitle from '@mui/material/DialogTitle'\nimport DialogContent from '@mui/material/DialogContent'\nimport DialogActions from '@mui/material/DialogActions'\nimport MuiDialog from '@mui/material/Dialog'\nimport TextField from '@mui/material/TextField'\n\nconst RenameDialog = React.forwardRef((props, ref) => {\n  const [open, setOpen] = React.useState(false)\n  const [callback, setCallback] = React.useState(() => () => {})\n  const [subject, setSubject] = React.useState('')\n  const [oldName, setOldName] = React.useState('')\n  const [value, setValue] = React.useState('')\n\n  React.useImperativeHandle(ref, () => ({\n    askToRename(callback, subject, oldName) {\n      setCallback(() => callback)\n      setSubject(subject)\n      setOldName(oldName)\n      setValue(oldName)\n      setOpen(true)\n    }\n  }))\n\n  const handleCancel = () => {\n    setOpen(false)\n    callback()\n  }\n\n  const handleRename = () => {\n    setOpen(false)\n    callback(value)\n  }\n\n  return (\n    <MuiDialog\n      maxWidth='xs'\n      open={open}\n      onClose={handleCancel}\n    >\n      <DialogTitle> {subject}</DialogTitle>\n      <DialogContent>\n        <TextField\n          label=' '\n          placeholder={oldName}\n          variant='outlined'\n          value={value}\n          onChange={e => setValue(e.target.value)}\n          style={{ marginTop: 15 }}\n        />\n      </DialogContent>\n      <DialogActions>\n        <Button autoFocus onClick={handleCancel} color=\"primary\">\n          \n        </Button>\n        <Button onClick={handleRename} color=\"primary\" disabled={!value.length}>\n          \n        </Button>\n      </DialogActions>\n    </MuiDialog>\n  )\n})\n\nRenameDialog.displayName = 'RenameDialog'\n\nexport default RenameDialog\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport styles from '../styles.module.scss'\nimport { MdDelete } from 'react-icons/md'\nimport { ContextMenuActions } from 'components/ContextMenu'\nimport { BiRename } from 'react-icons/bi'\nimport { formatDate } from '../../../utils'\nimport { componentsPropTypes } from '../../../consts'\nimport PackImage from './index'\nimport DeleteConfirmationDialog from 'components/ConfirmationDialog/DeleteConfirmationDialog'\nimport { DashboardContext } from '../index'\nimport RenameDialog from 'components/RenameDialog'\nimport { loadLocalPack, saveLocalPack } from 'localStorage/localPacks'\n\nPack.propTypes = { pack: PropTypes.shape(componentsPropTypes.pack) }\nexport default function Pack(props) {\n  const confDialogRef = React.useRef()\n  const renameDialog = React.useRef()\n  const dashboardActions = React.useContext(DashboardContext)\n  const creationTime = formatDate(new Date(props.pack.creationTime))\n  const contextMenuActions = React.useContext(ContextMenuActions)\n\n  const handleOpenMenu = e => {\n    contextMenuActions.open(e, [\n      { name: '', icon: <BiRename />, action: () => handleRenamePack() },\n      { name: '', icon: <MdDelete />, action: () => handleDeletePack() }\n    ])\n  }\n\n  const handleDeletePack = async () => {\n    if(await confDialogRef.current.confirmPackDeletion(props.pack.uuid))\n      dashboardActions.reloadPacks()\n  }\n\n  const handleRenamePack = async () => {\n    const newName = await new Promise(resolve =>\n      renameDialog.current.askToRename(resolve, '', props.pack.name)\n    )\n    if(newName !== undefined){\n      let pack = await loadLocalPack(props.pack.uuid)\n      pack = { ...pack, name: newName }\n      saveLocalPack(pack)\n      dashboardActions.reloadPacks()\n    }\n  }\n\n  return (\n    <>\n      <div\n        className={[styles.packBase, styles.pack].join(' ')}\n        onContextMenu={handleOpenMenu}\n      >\n        <PackImage src={props.pack.logo} />\n        <div className={styles.info}>\n          <span className={styles.name}>{props.pack.name}</span>\n          <span className={styles.time}>: {creationTime}</span>\n        </div>\n      </div>\n      <div onClick={e => e.stopPropagation()}>\n        <DeleteConfirmationDialog ref={confDialogRef} />\n        <RenameDialog ref={renameDialog} />\n      </div>\n    </>\n  )\n}\n","import React from 'react'\nimport styles from '../styles.module.scss'\nimport PropTypes from 'prop-types'\nimport { BsPlus } from 'react-icons/bs'\nimport Skeleton from '@mui/material/Skeleton'\nimport { componentsPropTypes } from '../../../consts'\nimport { getFile } from 'localStorage/fileStorage'\nexport { default as Upload } from './Upload'\nexport { default as Pack } from './Pack'\nimport { connect } from 'react-redux'\n\nexport function Create() {\n  return (\n    <div className={[styles.packBase, styles.newPack].join(' ')}>\n      <span><BsPlus />   </span>\n    </div>\n  )\n}\n\nLoading.propTypes = { name: PropTypes.string }\nexport function Loading(props) {\n  return (\n    <div className={[styles.packBase, styles.loading].join(' ')}>\n      <Skeleton variant='rectangular' width='100%' height='100%' className={styles.skeleton} />\n      { props.name && <span> {props.name}</span> }\n    </div>\n  )\n}\n\nPackImage.propTypes = {\n  src: componentsPropTypes.pack.thumbnail,\n  dispatch: PropTypes.func\n}\n\nfunction PackImage(props) {\n  const [src, setSrc] = React.useState()\n\n  React.useEffect(() => {\n    if(!src) return\n    props.dispatch({ type: 'fileRendering/setFileUnlinkCallback', fileURI: props.src, callback: () => setSrc() })\n  }, [setSrc])\n\n  React.useEffect(() => {\n    let cleanup = () => {}\n    if(props.src) {\n      (async () => {\n        const file = await getFile(props.src)\n        if(file === null) return setSrc()\n\n        const src = URL.createObjectURL(file.blob)\n        setSrc(src)\n        props.dispatch({ type: 'fileRendering/fileRenderingStarted', fileURI: props.src, callback: () => setSrc() })\n\n        cleanup = () => {\n          URL.revokeObjectURL(src)\n          props.dispatch({ type: 'fileRendering/fileRenderingStopped', fileURI: props.src })\n        }\n      })()\n    } else {\n      setSrc()\n    }\n    return () => cleanup(src)\n  }, [props.src])\n\n  return (\n    <div className={styles.pictureContainer}>\n      {src\n        ? <img src={src} className={styles.thumbnail} />\n        : <div className={styles.thumbnail} />\n      }\n    </div>\n  )\n}\n\nexport default connect(null)(PackImage)\n","import React from 'react'\nimport styles from './styles.module.scss'\nimport PropTypes from 'prop-types'\nimport { componentsPropTypes } from '../../consts.js'\nimport { Create, Upload, Loading, Pack } from './packTypes'\nimport { Link } from 'react-router-dom'\nimport { loadLocalPacks } from '../../localStorage/localPacks'\nimport { connect } from 'react-redux'\n\nexport default function Dashboard() {\n  return (\n    <LocalPacks />\n  )\n}\n\nexport const DashboardContext = React.createContext({})\nexport const LocalPacks = connect(state => ({ dashboard: state.dashboard }))(props => {\n  const [savedLocalPacks, setSavedLocalPacks] = React.useState()\n\n  const loadPacks = async () => {\n    const packsUUID = await loadLocalPacks()\n    const packs = packsUUID\n      .sort((a,b) => a.creationTime - b.creationTime)\n    setSavedLocalPacks(packs)\n  }\n\n  React.useEffect(() => loadPacks(), [])\n\n  const contextActions = {\n    reloadPacks: () => loadPacks()\n  }\n\n  return (\n    <div>\n      <DashboardContext.Provider value={contextActions}>\n        <div className={styles.packsList}>\n          <PackBase type='create' />\n          <PackBase type='upload' reloadPacks={loadPacks} />\n          { props.dashboard?.uploading?.reverse().map(({ name }, i) => <PackBase type='loading' name={name} key={i} />) }\n          { savedLocalPacks\n            ? savedLocalPacks.map(pack => <PackBase type='pack' key={pack.uuid} pack={pack} />)\n            : new Array(5).fill().map((_, i) => <PackBase type='loading' key={i} />)\n          }\n        </div>\n      </DashboardContext.Provider>\n    </div>\n  )\n})\n\nPackBase.propTypes = PackSwitch.propTypes = {\n  type: PropTypes.oneOf(['create', 'upload', 'pack', 'loading']),\n  pack: PropTypes.shape(componentsPropTypes.pack),\n  name: PropTypes.string,\n  reloadPacks: PropTypes.func\n}\n\nfunction PackBase(props) {\n  return (\n    ['loading', 'upload'].includes(props.type)\n      ? <PackSwitch {...props} />\n      : <Link to={props.type === 'pack' ? `/pack/${props.pack.uuid}` : `${props.type}`}><PackSwitch {...props} /></Link>\n  )\n}\n\nfunction PackSwitch(props) {\n  return (\n    {\n      'create': <Create />,\n      'upload': <Upload reloadPacks={props.reloadPacks} />,\n      'loading': <Loading name={props.name} />,\n      'pack': <Pack pack={props.pack} />\n    }[props.type]\n  )\n}\n","import React from 'react'\nimport styles from './styles.module.scss'\nimport { Link } from 'react-router-dom'\nimport IconButton from '@mui/material/IconButton'\nimport { ImGithub } from 'react-icons/im'\nimport { AiOutlineInfoCircle } from 'react-icons/ai'\nimport AppBar from '@mui/material/AppBar'\nimport Toolbar from '@mui/material/Toolbar'\nimport Typography from '@mui/material/Typography'\nimport Button from '@mui/material/Button'\nimport Dialog from '@mui/material/Dialog'\nimport DialogActions from '@mui/material/DialogActions'\nimport DialogContent from '@mui/material/DialogContent'\nimport DialogContentText from '@mui/material/DialogContentText'\nimport DialogTitle from '@mui/material/DialogTitle'\n\nexport default function Navigation() {\n  const [infoShown, setInfoShown] = React.useState(false)\n\n  return (\n    <AppBar position='static' style={{ zIndex: 4 }}>\n      <Toolbar color='primary'>\n        <div className={styles.logoContainer}>\n          <Link to='/' className={styles.logo}>\n            <Typography variant='h6' component='div'>\n              SIPacker\n            </Typography>\n          </Link>\n        </div>\n        <div>\n          <a href='https://github.com/VityaSchel/SIPacker' target='_blank' rel='noreferrer'>\n            <IconButton>\n              <ImGithub />\n            </IconButton>\n          </a>\n          <IconButton onClick={() => setInfoShown(true)}>\n            <AiOutlineInfoCircle />\n          </IconButton>\n        </div>\n        <Dialog\n          open={infoShown}\n          onClose={() => setInfoShown(false)}\n        >\n          <DialogTitle>\n             \n          </DialogTitle>\n          <DialogContent>\n            <DialogContentText>\n              <p>-  VityaSchel  2021    SiGame    SIQuester.</p>\n              <p>       -      Issues,     .</p>\n              <p>\n                <a\n                  href='https://github.com/VladimirKhil/SI/wiki/%D0%A1%D0%BF%D0%B5%D1%86%D0%B8%D1%84%D0%B8%D0%BA%D0%B0%D1%86%D0%B8%D1%8F-%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%82%D0%B0-.siq'\n                  className='onHover'\n                >\n                    .siq\n                </a>\n              </p>\n              <p>\n                     ,          \n                (      )\n              </p>\n              <p>\n                     \n                 <a\n                  href='https://vk.com/id245297843'\n                  target='_blank'\n                  rel=\"noreferrer\"\n                  className='onHover'\n                > </a>,          ,   \n                       .\n              </p>\n            </DialogContentText>\n          </DialogContent>\n          <DialogActions>\n            <Button onClick={() => setInfoShown(false)}></Button>\n          </DialogActions>\n        </Dialog>\n      </Toolbar>\n    </AppBar>\n  )\n}\n","import React from 'react'\nimport styles from './styles.module.scss'\nimport TextField from '@mui/material/TextField'\nimport Button from '@mui/material/Button'\nimport { v4 as uuidv4 } from 'uuid'\nimport { useHistory } from 'react-router-dom'\nimport { saveLocalPack } from '../../localStorage/localPacks'\nimport dayjs from 'dayjs'\nimport { format } from '../../consts.js'\n\nexport default function NewPack() {\n  const [packName, setPackName] = React.useState('')\n  const history = useHistory()\n\n  const createPack = async () => {\n    const uuid = uuidv4()\n    const pack = {\n      uuid,\n      name: packName,\n      date: dayjs().format('DD.MM.YYYY'),\n      creationTime: Date.now(),\n      language: '',\n      version: format.latestVersion,\n      difficulty: 5,\n      rounds: []\n    }\n    await saveLocalPack(pack)\n    history.push(`/pack/${uuid}`)\n  }\n\n  const handleCheckSubmit = e => {\n    if(e.key === 'Enter') createPack()\n  }\n\n  const examples = ['  ', ',    ', '', '   ', ' ']\n\n  return (\n    <div className={styles.container}>\n      <TextField\n        label=' '\n        variant='outlined'\n        value={packName}\n        onChange={e => setPackName(e.target.value)}\n        className={styles.field}\n        placeholder={examples[Math.floor(Math.random()*examples.length)]}\n        onKeyUp={handleCheckSubmit}\n        autoFocus\n      />\n      <Button\n        variant='contained'\n        onClick={() => createPack()}\n        disabled={!packName.length}\n      ></Button>\n    </div>\n  )\n}\n","import React from 'react'\nimport { Link } from 'react-router-dom'\nimport Breadcrumbs from '@mui/material/Breadcrumbs'\nimport Typography from '@mui/material/Typography'\nimport { useLocation } from 'react-router'\nimport styles from '../styles.module.scss'\nimport { connect } from 'react-redux'\nimport { componentsPropTypes, uuidRegex } from 'consts'\nimport { mapPackState } from 'utils'\nimport { settings, rounds, question } from '../pathRegexps.json'\n\nPackBreadcrumbs.propTypes = {\n  pack: componentsPropTypes.pack\n}\n\nfunction PackBreadcrumbs(props) {\n  const linkStyles = [styles.link, 'onHover', 'noDefaults'].join(' ')\n  const route = useLocation()\n  const [path, setPath] = React.useState([])\n\n  React.useEffect(() => {\n    const page = route.pathname.split(new RegExp(`/pack/${uuidRegex}`), 2)[1]\n    const parts = page.split('/')\n\n    const crumbs = {\n      dashboard: { to: '/', name: '' },\n      currentPack: { to: `/pack/${props.pack.uuid}`, name: props.pack.name },\n      settings: { to: `/pack/${props.pack.uuid}/settings`, name: '' },\n      rounds: { to: `/pack/${props.pack.uuid}/rounds/${parts[2]}`, name: ` ${parts[2]}` },\n      theme: { name: ` ${parts[4]}` },\n      questions: {\n        to: `/pack/${props.pack.uuid}/rounds/${parts[2]}/themes/${parts[4]}/questions/${parts[6]}`,\n        name: parts[6] === 'add' ? ' ' : `  ${parts[6]}`\n      }\n    }\n\n    const paths = {\n      default: [crumbs.dashboard, crumbs.currentPack],\n      [settings]: [crumbs.dashboard, crumbs.currentPack, crumbs.settings],\n      [rounds]: [crumbs.dashboard, crumbs.currentPack, crumbs.rounds],\n      [question]: [crumbs.dashboard, crumbs.currentPack, crumbs.rounds, crumbs.theme, crumbs.questions],\n    }\n\n    for(let [pathRegex, path] of Object.entries(paths)){\n      if(new RegExp(`^${pathRegex}/?$`).test(page)){\n        return setPath(path)\n      }\n    }\n    return setPath(paths.default)\n  }, [route, props.pack])\n\n  return (\n    <Breadcrumbs>\n      {path.map(({ to, name }, i) => {\n        if(to && i !== path.length-1) {\n          return <Link to={to} className={linkStyles} key={i}>\n            {name}\n          </Link>\n        } else {\n          return <Typography color={i === path.length-1 ? 'text.primary' : 'text.secondary'} key={i}>{name}</Typography>\n        }\n      })}\n    </Breadcrumbs>\n  )\n}\n\nexport default connect(mapPackState)(PackBreadcrumbs)\n","import React from 'react'\nimport DialogContentText from '@mui/material/DialogContentText'\nimport DialogTitle from '@mui/material/DialogTitle'\nimport DialogContent from '@mui/material/DialogContent'\nimport MuiDialog from '@mui/material/Dialog'\nimport LinearProgress from '@mui/material/LinearProgress'\nimport Zoom from '@mui/material/Zoom'\nimport DialogActions from '@mui/material/DialogActions'\nimport Button from '@mui/material/Button'\nimport { generate, check } from 'localStorage/packGenerator'\nimport { saveAs } from 'file-saver'\nimport { slugify } from 'transliteration'\n\nconst Transition = React.forwardRef(function Transition(props, ref) {\n  return <Zoom ref={ref} {...props} />\n})\n\nconst SavingDialog = React.forwardRef((props, ref) => {\n  const [open, setOpen] = React.useState(false)\n  const [generating, setGenerating] = React.useState(false)\n  const [errors, setErrors] = React.useState([])\n  const [warnings, setWarnings] = React.useState([])\n  const [pack, setPack] = React.useState()\n\n  React.useImperativeHandle(ref, () => ({\n    save(pack) {\n      setOpen(true)\n      setPack(pack)\n    }\n  }))\n\n  React.useEffect(() => pack?.uuid && startProcessing(), [pack])\n\n  const startProcessing = async () => {\n    const errors = await check(pack)\n    setErrors(errors)\n    if(errors.length) return\n\n    setGenerating(true)\n    setTimeout(bundlePack, 500)\n  }\n\n  const bundlePack = async () => {\n    let zip, warnings = []\n    try {\n      const result = await generate(pack)\n      zip = result.result\n      warnings = result.warnings\n    } catch(e) {\n      console.error(e)\n      return setErrors([e?.message])\n    }\n    setGenerating(false)\n    saveAs(zip, `${slugify(pack.name)}.siq`, { autoBom: true })\n    setWarnings(warnings)\n    setOpen(warnings.length)\n  }\n\n  return (\n    <MuiDialog\n      maxWidth=\"xs\"\n      open={open}\n      TransitionComponent={Transition}\n      onClose={() => errors.length && setOpen(false)}\n    >\n      <DialogTitle> </DialogTitle>\n      <DialogContent>\n        <DialogContentText>\n          { generating && Boolean(!errors.length) && <>\n            <p>   .     ,     -.</p>\n            <LinearProgress color='primary' />\n          </>}\n          { Boolean(errors.length) && <>\n            <p>       :</p>\n            <ul>\n              { errors.map((error, i) => <li key={i}>{error}</li>) }\n            </ul>\n          </> }\n          { Boolean(warnings.length) && <>\n            <p>      ,    :</p>\n            <ul>\n              { warnings.map((warning, i) => <li key={i}>{warning}</li>) }\n            </ul>\n          </> }\n        </DialogContentText>\n      </DialogContent>\n      { !generating &&\n        <DialogActions>\n          <Button autoFocus onClick={() => setOpen(false)}>\n            \n          </Button>\n        </DialogActions>\n      }\n    </MuiDialog>\n  )\n})\n\nSavingDialog.displayName = 'ConfirmationDialog'\nexport default SavingDialog\n","import React from 'react'\nimport { useLocation, useHistory, Link } from 'react-router-dom'\nimport styles from './styles.module.scss'\nimport { connect } from 'react-redux'\nimport { componentsPropTypes } from '../../../consts'\nimport IconButton from '@mui/material/IconButton'\nimport { MdSettings, MdDelete, MdFileDownload } from 'react-icons/md'\nimport { saveLocalPack } from 'localStorage/localPacks'\nimport DeleteConfirmationDialog from 'components/ConfirmationDialog/DeleteConfirmationDialog'\nimport SavingDialog from './SavingDialog'\nimport { mapPackState } from 'utils'\nimport { uuidRegex } from 'consts'\nimport { root, rounds, question } from '../pathRegexps.json'\n\nPackToolbar.propTypes = {\n  pack: componentsPropTypes.pack\n}\n\nfunction PackToolbar(props) {\n  const confirmationDialogRef = React.useRef()\n  const savingDialogRef = React.useRef()\n  const history = useHistory()\n  const { pathname } = useLocation()\n\n  const handleSave = () => savingDialogRef.current.save(props.pack)\n  const handleDeletePack = () => {\n    confirmationDialogRef.current.confirmPackDeletion(props.pack.uuid)\n  }\n\n  const handleDeleteRound = async () => {\n    if(!await confirmationDialogRef.current.confirmRoundDeletion()) return\n    const pack = { ...props.pack }\n    const roundIndex = parseInt(pathname.split(`/pack/${props.pack.uuid}/rounds/`, 2)[1])\n    pack.rounds.splice(roundIndex - 1, 1)\n    await saveLocalPack(pack)\n    history.push(`/pack/${pack.uuid}`)\n  }\n\n  const handleDeleteQuestion = async () => {\n    if(!await confirmationDialogRef.current.confirmDeleteQuestion()) return\n    const pack = { ...props.pack }\n    let [,round,themeIndex,questionPrice] = pathname.match(new RegExp(`/pack/${uuidRegex}/rounds/(\\\\d+)/themes/(\\\\d+)/questions/(\\\\d+)`))\n    questionPrice = parseInt(questionPrice)\n    const theme = props.pack.rounds[round-1].themes[themeIndex-1]\n    const questionIndex = theme.questions.findIndex(({ price }) => price === Number(questionPrice))\n    theme.questions.splice(questionIndex, 1)\n    theme.questions = theme.questions.sort((a, b) => a.price - b.price)\n    await saveLocalPack(pack)\n    history.push(`/pack/${pack.uuid}/rounds/${round}`)\n  }\n\n  const buttons = props.pack && {\n    [root]: [\n      [handleSave, <MdFileDownload key='download' />],\n      [`/pack/${props.pack.uuid}/settings`, <MdSettings key='settings' />],\n      [handleDeletePack, <MdDelete key='delete' />, styles.delete]\n    ],\n    [rounds]: [\n      [handleDeleteRound, <MdDelete key='delete' />, styles.delete]\n    ],\n    [question]: [\n      [handleDeleteQuestion, <MdDelete key='delete' />, styles.delete]\n    ]\n  }\n\n  const path = pathname.split(`/pack/${props.pack.uuid}`, 2)[1]\n  const pageToolbar = Object.entries(buttons).find(\n    ([regex, toolbar]) => new RegExp(`^${regex}/?$`).test(path) && toolbar\n  )\n\n  return (\n    <>\n      <div className={styles.buttons}>\n        {pageToolbar && pageToolbar[1].map(([action, icon, styles], i) => <>\n          {\n            typeof action === 'string'\n              ? <Link to={action} className={styles} key={i}>\n                <IconButton>\n                  {icon}\n                </IconButton>\n              </Link>\n              : <IconButton className={styles} onClick={action} key={i}>\n                {icon}\n              </IconButton>\n          }\n        </>)}\n      </div>\n      <DeleteConfirmationDialog ref={confirmationDialogRef} />\n      <SavingDialog ref={savingDialogRef} />\n    </>\n  )\n}\n\nexport default connect(mapPackState)(PackToolbar)\n","import PropTypes from 'prop-types'\nimport { Draggable } from 'react-beautiful-dnd'\nimport Card from '@mui/material/Card'\nimport styles from './styles.module.scss'\n\nfunction getStyle(style) {\n  if (style.transform) {\n    const axisLockY =\n      'translate(0px' +\n      style.transform.slice(\n        style.transform.indexOf(','),\n        style.transform.length\n      )\n    return {\n      ...style,\n      transform: axisLockY\n    }\n  }\n  return style\n}\n\nItem.propTypes = {\n  index: PropTypes.number,\n  draggableId: PropTypes.string,\n  className: PropTypes.string,\n  children: PropTypes.func,\n  tag: PropTypes.string,\n}\n\nexport default function Item(props) {\n  return (\n    <Draggable\n      draggableId={String(props.draggableId)}\n      index={props.index}\n    >\n      {provided =>\n        <Card\n          className={[props.className, styles.item].join(' ')}\n          ref={provided.innerRef}\n          {...provided.draggableProps}\n          style={getStyle(provided.draggableProps.style)}\n        >\n          {props.children(provided)}\n        </Card>\n      }\n    </Draggable>\n  )\n}\n","import PropTypes from 'prop-types'\nimport styles from './styles.module.scss'\nimport { MdDragHandle } from 'react-icons/md'\n\nHandle.propTypes = { provided: PropTypes.object }\nexport default function Handle(props) {\n  return (\n    <div\n      className={styles.handle}\n      {...props.provided.dragHandleProps}\n    >\n      <MdDragHandle />\n    </div>\n  )\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport styles from './styles.module.scss'\nimport CardContent from '@mui/material/CardContent'\nimport CardActionArea from '@mui/material/CardActionArea'\nimport { darkTheme } from '../../../../App'\nimport { Link } from 'react-router-dom'\nimport { MdDelete } from 'react-icons/md'\nimport IconButton from '@mui/material/IconButton'\nimport TextField from '@mui/material/TextField'\nimport Item from 'components/ItemsList/Item'\nimport DeleteConfirmationDialog from 'components/ConfirmationDialog/DeleteConfirmationDialog'\nimport Typography from '@mui/material/Typography'\nimport Handle from 'components/ItemsList/Handle'\nimport { ContextMenuActions } from 'components/ContextMenu'\n\nRound.propTypes = ItemContent.propTypes = {\n  draggableId: PropTypes.string,\n  item: PropTypes.object,\n  pack: PropTypes.object,\n  index: PropTypes.number,\n  editing: PropTypes.bool,\n  setEditing: PropTypes.func,\n  handleRemoveRound: PropTypes.func,\n  roundNamesTextInput: PropTypes.arrayOf(PropTypes.string),\n  handleRoundNameChange: PropTypes.func\n}\n\nexport default function Round(props) {\n  const confirmationDialogRef = React.useRef()\n  const contextMenuActions = React.useContext(ContextMenuActions)\n\n  const handleRemoveRound = async () => {\n    if(!await confirmationDialogRef.current.confirmRoundDeletion()) return\n    props.handleRemoveRound(props.index)\n  }\n\n  const handleOpenMenu = e => {\n    contextMenuActions.open(e, [\n      { name: '', icon: <MdDelete />, action: () => handleRemoveRound() }\n    ])\n  }\n\n  return (\n    <Item {...props} className={styles.cardOfRound}>\n      {(provided) => <>\n        {!props.editing\n          ? <Link\n            to={`/pack/${props.pack.uuid}/rounds/${props.index+1}`}\n            className={styles.link}\n            onContextMenu={handleOpenMenu}\n          >\n            <CardActionArea>\n              <ItemContent {...props} />\n            </CardActionArea>\n          </Link>\n          : <div className={styles.item}>\n            <Handle provided={provided} />\n            <ItemContent {...props} />\n            <Toolbar handleRemoveRound={handleRemoveRound} />\n          </div>\n        }\n        <DeleteConfirmationDialog ref={confirmationDialogRef} />\n      </>}\n    </Item>\n  )\n}\n\nfunction ItemContent(props) {\n  const round = props.item\n\n  return (\n    <CardContent style={{ paddingBottom: darkTheme.spacing(2) }} className={styles.flex1}>\n      {\n        props.editing\n          ? <TextField\n            value={props.roundNamesTextInput[props.index]}\n            label=' '\n            variant='outlined'\n            onChange={e => props.handleRoundNameChange(e, props.index)}\n            size='small'\n            className={styles.inputField}\n          />\n          : <Typography variant='body2' color='text.secondary' className={styles.flex2}>\n             {props.index+1}. {round.name}\n          </Typography>\n      }\n    </CardContent>\n  )\n}\n\nToolbar.propTypes = { handleRemoveRound: PropTypes.func }\nfunction Toolbar(props) {\n  return (\n    <IconButton onClick={props.handleRemoveRound} className={styles.delete}>\n      <MdDelete />\n    </IconButton>\n  )\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport styles from './styles.module.scss'\nimport { MdCancel, MdAdd, MdDone } from 'react-icons/md'\nimport cx from 'classnames'\nimport Button from '@mui/material/Button'\nimport InputLabel from '@mui/material/InputLabel'\nimport FormControl from '@mui/material/FormControl'\nimport OutlinedInput from '@mui/material/OutlinedInput'\nimport InputAdornment from '@mui/material/InputAdornment'\nimport IconButton from '@mui/material/IconButton'\n\nAddItem.propTypes = {\n  onAdd: PropTypes.func,\n  inputLabel: PropTypes.string,\n  buttonLabel: PropTypes.string,\n  className: PropTypes.string\n}\nexport default function AddItem(props) {\n  const [addingItem, setAddingItem] = React.useState(false)\n\n  return (\n    <div className={[styles.addItem, props.className].join(' ')}>\n      <ItemName\n        setAddingItem={setAddingItem}\n        handleAddItem={props.onAdd}\n        className={cx(styles.button, { [styles.expand]: addingItem })}\n        addingItem={addingItem}\n        label={props.inputLabel}\n      />\n      <div className={cx([styles.button, styles.addButtonOuter], { [styles.expand]: !addingItem })}>\n        <Button\n          variant='contained'\n          startIcon={<MdAdd />}\n          onClick={() => setAddingItem(true)}\n          className={styles.addButton}\n        >{props.buttonLabel}</Button>\n      </div>\n    </div>\n  )\n}\n\nItemName.propTypes = {\n  setAddingItem: PropTypes.func,\n  handleAddItem: PropTypes.func,\n  onKeyDown: PropTypes.func,\n  className: PropTypes.string,\n  addingItem: PropTypes.bool,\n  label: PropTypes.string\n}\n\nfunction ItemName(props) {\n  const [value, setValue] = React.useState('')\n  const outlinedInput = React.useRef()\n\n  const handleDone = () => {\n    props.setAddingItem(false)\n    if(value.length) {\n      props.handleAddItem(value)\n      setValue('')\n    }\n  }\n\n  React.useEffect(() => {\n    props.addingItem && outlinedInput.current.focus()\n  }, [props.addingItem])\n\n  return (\n    <FormControl variant='outlined' className={props.className}>\n      <InputLabel size=\"small\">{props.label}</InputLabel>\n      <OutlinedInput\n        label={props.label}\n        size='small'\n        type='text'\n        value={value}\n        onChange={e => setValue(e.target.value)}\n        onKeyDown={e => e.key === 'Enter' && handleDone()}\n        style={{ paddingRight: 0 }}\n        inputRef={outlinedInput}\n        endAdornment={\n          <InputAdornment position='end'>\n            <IconButton onClick={handleDone}>\n              {!value.length ? <MdCancel /> : <MdDone />}\n            </IconButton>\n          </InputAdornment>\n        }\n      />\n    </FormControl>\n  )\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { DragDropContext, Droppable } from 'react-beautiful-dnd'\nimport Typography from '@mui/material/Typography'\nimport listStyles from './styles.module.scss'\n\nItemsList.propTypes = {\n  droppableId: PropTypes.string,\n  droppableClassName: PropTypes.string,\n  draggableProps: PropTypes.object,\n  list: PropTypes.array,\n  itemComponent: PropTypes.func,\n  useIdAsKey: PropTypes.bool,\n  noItemsLabel: PropTypes.string,\n  onDragEnd: PropTypes.func\n}\n\nexport default function ItemsList(props) {\n  const [itemsMap, setItemsMap] = React.useState({ map: new WeakMap(), length: 0 })\n\n  return (\n    <DragDropContext onDragEnd={props.onDragEnd}>\n      <Droppable droppableId={props.droppableId}>\n        {provided => (\n          <div\n            ref={provided.innerRef}\n            {...provided.droppableProps}\n            className={props.droppableClassName}\n          >\n            {(() => {\n              const children = props.list.length\n                ? props.list.map((item, i) => {\n                  const oid = object => {\n                    if(!itemsMap.map.has(object)) itemsMap.map.set(object, ++itemsMap.length)\n                    return itemsMap.map.get(object)\n                  }\n\n                  return (\n                    <props.itemComponent\n                      key={props.useIdAsKey ? item.id : oid(item)}\n                      index={i}\n                      draggableId={props.useIdAsKey ? item.id : oid(item)}\n                      item={item}\n                      {...props.draggableProps}\n                    />\n                  )\n                })\n                : <Typography\n                  variant='body1'\n                  gutterBottom\n                  className={listStyles.noItems}\n                >{props.noItemsLabel}</Typography>\n              setItemsMap(itemsMap)\n              return children\n            })()}\n            {provided.placeholder}\n          </div>\n        )}\n      </Droppable>\n    </DragDropContext>\n  )\n}\n","import PropTypes from 'prop-types'\nimport styles from './styles.module.scss'\nimport IconButton from '@mui/material/IconButton'\nimport { MdEdit, MdDone } from 'react-icons/md'\nimport Typography from '@mui/material/Typography'\n\nEditingToolbar.propTypes = {\n  showButton: PropTypes.boolean,\n  editing: PropTypes.boolean,\n  onSwitch: PropTypes.func,\n  heading: PropTypes.string\n}\nexport default function EditingToolbar(props) {\n  return (\n    <div className={styles.toolbar}>\n      <h2 className={styles.text}>{props.heading}</h2>\n      {props.showButton && props.editing && <>\n        <Typography color='text.secondary' className={styles.hint}>\n             \n        </Typography>\n      </>}\n      {props.showButton && <IconButton onClick={props.onSwitch}>{props.editing ? <MdDone /> : <MdEdit />}</IconButton>}\n    </div>\n  )\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport styles from './styles.module.scss'\nimport Round from './Round'\nimport AddItem from 'components/ItemsList/AddItem'\nimport { connect } from 'react-redux'\nimport { saveLocalPack } from 'localStorage/localPacks'\nimport ItemsList from 'components/ItemsList'\nimport EditingToolbar from 'components/EditingToolbar'\nimport { mapPackState } from '../../../../utils'\n\nconst reorder = (list, startIndex, endIndex) => {\n  const result = Array.from(list)\n  const [removed] = result.splice(startIndex, 1)\n  result.splice(endIndex, 0, removed)\n  return result\n}\n\nRoundsList.propTypes = {\n  pack: PropTypes.object,\n  dispatch: PropTypes.func\n}\n\nfunction RoundsList(props) {\n  const [rounds, setRounds] = React.useState([])\n  const [editing, setEditing] = React.useState(false)\n  const pack = props.pack\n\n  React.useEffect(() => setRounds(props.pack.rounds), [props.pack.rounds])\n\n  const handleAddRound = async name => {\n    let packRounds = [...pack.rounds]\n    packRounds.push({ name, themes: [] })\n    updateRounds(packRounds)\n  }\n\n  const handleRemoveRound = index => {\n    let packRounds = [...pack.rounds]\n    packRounds.splice(index, 1)\n    updateRounds(packRounds)\n  }\n\n  const onDragEnd = result => {\n    if (!result.destination) return\n    const items = reorder(rounds, result.source.index, result.destination.index)\n    updateRounds(items)\n  }\n\n  const handleSwitchEditing = () => {\n    setEditing(!editing)\n  }\n\n  const handleRoundNameChange = (e, index) => {\n    const namesList = [...rounds]\n    namesList[index].name = e.target.value\n    updateRounds(namesList)\n  }\n\n  const updateRounds = async items => {\n    setRounds(items)\n    let newPack = { ...pack, rounds: items }\n    await saveLocalPack(newPack)\n    props.dispatch({ type: 'pack/load', pack: newPack })\n  }\n\n  const names = rounds.map(pack => pack.name)\n\n  return (\n    <div className={styles.rounds}>\n      <EditingToolbar\n        showButton={Boolean(rounds.length)}\n        onSwitch={handleSwitchEditing}\n        editing={editing}\n        heading=' '\n      />\n      <ItemsList\n        onDragEnd={onDragEnd}\n        droppableId='rounds'\n        droppableClassName={styles.droppable}\n        itemComponent={Round}\n        draggableProps={{\n          pack, editing,\n          handleRemoveRound: handleRemoveRound,\n          handleRoundNameChange: handleRoundNameChange,\n          roundNamesTextInput: names\n        }}\n        list={rounds}\n        noItemsLabel='  '\n      />\n      <AddItem\n        onAdd={handleAddRound}\n        inputLabel=' '\n        buttonLabel=' '\n      />\n    </div>\n  )\n}\n\nexport default connect(mapPackState)(RoundsList)\n","import PropTypes from 'prop-types'\nimport styles from './styles.module.scss'\nimport Typography from '@mui/material/Typography'\nimport LinearProgress from '@mui/material/LinearProgress'\nimport { connect } from 'react-redux'\nimport { useLocation } from 'react-router'\nimport { Link } from 'react-router-dom'\nimport { MdKeyboardArrowRight } from 'react-icons/md'\nimport cx from 'classnames'\nimport { mapPackState } from '../../../../utils'\nimport {\n  hasQuestionInEachTheme, hasThemeInEachRound, has5ThemesInEachRound, hasAtLeast25Questions, hasQuestionWithAuction,\n  hasQuestionWithBagCat, hasScenarioInEachQuestion\n} from 'utils'\n\nCheckList.propTypes = { pack: PropTypes.object }\nfunction CheckList(props) {\n\n  const items = {\n    required: [\n      { name: '  ', link: '/pack/%packUUID%/settings/', done: Boolean(props.pack.authors) },\n      { name: '  ', link: '/pack/%packUUID%/settings/', done: Boolean(props.pack.language) },\n      { name: ' ', link: '/pack/%packUUID%/', done: Boolean(props.pack.rounds.length) },\n      { name: '    ', done: hasThemeInEachRound(props.pack) },\n      { name: '    ', done: hasQuestionInEachTheme(props.pack) },\n      { name: '     ', done: hasScenarioInEachQuestion(props.pack) },\n      //        \n    ],\n    optional: [\n      { name: '  ', link: '/pack/%packUUID%/settings/', done: Boolean(props.pack.logo) },\n      { name: '  ', link: '/pack/%packUUID%/settings/', done: Boolean(props.pack.tags) },\n      { name: '   5    ', done: has5ThemesInEachRound(props.pack) },\n      { name: '   25  ', done: hasAtLeast25Questions(props.pack) },\n      { name: '   ', done: hasQuestionWithAuction(props.pack) },\n      { name: '    ', done: hasQuestionWithBagCat(props.pack) },\n      { name: ' ,      1 ' }\n    ]\n  }\n  const filterItems = f => f.filter(item => item.done !== undefined)\n  const reducer = (progress, point) => progress+Number(point.done)\n  const progress = filterItems(items.required).reduce(reducer, 0) + filterItems(items.optional).reduce(reducer, 0)\n  const max = filterItems(items.required).length + filterItems(items.optional).length\n\n  return (\n    <div className={styles.container}>\n      <Typography variant='h6' className={styles.text}>:</Typography>\n      <div className={styles.progress}>\n        <LinearProgress variant='determinate' value={progress/max*100} className={styles.progressBar} />\n        <Typography variant='subtitle1' color='text.secondary'>: {progress}  {max}</Typography>\n      </div>\n      <ol className={styles.list}>\n        <Items starting>{items.required}</Items>\n        <div className={styles.caption}>\n          <span className={styles.line} />\n          <Typography variant='overline' className={styles.text}>  </Typography>\n          <span className={styles.line} />\n        </div>\n        <Items ending>{items.optional}</Items>\n      </ol>\n    </div>\n  )\n}\n\nfunction Items(props) {\n  return (\n    props.children.map((item, i) => <Item\n      key={i}\n      first={props.starting && i === 0}\n      last={props.ending && i === props.children.length-1}\n    >{item}</Item>)\n  )\n}\n\nMarker.propTypes = { first: PropTypes.bool, last: PropTypes.bool }\nItem.propTypes = { children: PropTypes.node, ...Marker.propTypes }\nfunction Item(props) {\n  const location = useLocation()\n  const path = location.pathname.split('/').filter(String)\n  const packUUID = path[1]\n  const link = props.children.link && props.children.link.replace('%packUUID%', packUUID)\n\n  return (\n    <li className={props.children.done && styles.done}>\n      <Marker first={props.first} last={props.last} />\n      { link\n        ? <Link to={link} className={styles.link}>\n          <span>{props.children.name}</span>\n          <MdKeyboardArrowRight/>\n        </Link>\n        : <span>{props.children.name}</span>\n      }\n    </li>\n  )\n}\n\nfunction Marker(props) {\n  return (\n    <span className={styles.marker}>\n      <span className={cx(styles.lineBefore, { [styles.hidden]: props.first })}/>\n      <span className={styles.bullet}/>\n      <span className={cx(styles.lineAfter, { [styles.hidden]: props.last })}></span>\n    </span>\n  )\n}\n\nexport default connect(mapPackState)(CheckList)\n","import styles from './styles.module.scss'\nimport RoundsList from './List/'\nimport CheckList from './CheckList/'\n\nexport default function Rounds() {\n  return (\n    <div className={styles.roundsPage}>\n      <RoundsList />\n      <CheckList />\n    </div>\n  )\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport styles from './styles.module.scss'\nimport { MdFilterList, MdDelete } from 'react-icons/md'\nimport Stack from '@mui/material/Stack'\nimport FormControlLabel from '@mui/material/FormControlLabel'\nimport Checkbox from '@mui/material/Checkbox'\nimport Typography from '@mui/material/Typography'\nimport { ContextMenuActions } from 'components/ContextMenu'\nimport { deleteFilesOfPack, getDeletedPacks, getAllURIsFromPack } from 'localStorage/fileStorage'\nimport store from 'reducers/index'\n\nFilters.propTypes = {\n  packs: PropTypes.arrayOf(PropTypes.string),\n  checkboxes: PropTypes.arrayOf(PropTypes.bool),\n  onChange: PropTypes.func,\n  reloadPacks: PropTypes.func\n}\n\nexport default function Filters(props) {\n  const contextMenuActions = React.useContext(ContextMenuActions)\n\n  const handleChange = (e, i) => {\n    const checkboxes = [...props.checkboxes]\n    checkboxes[i] = { ...checkboxes[i], checked: e.target.checked }\n    props.onChange(checkboxes)\n  }\n\n  const handleOpenMenu = uuid => e => {\n    contextMenuActions.open(\n      e,\n      [\n        {\n          name: '',\n          icon: <MdDelete />,\n          action: async () => {\n            if(uuid === null) {\n              const deletedPacks = await getDeletedPacks()\n              await Promise.all(\n                deletedPacks.map(\n                  async packUUID => {\n                    const fileURIs = await getAllURIsFromPack(packUUID)\n                    fileURIs.forEach(fileURI => store.dispatch({ type: 'fileRendering/fileUnlinked', fileURI }))\n                    await deleteFilesOfPack(packUUID)\n                  }\n                )\n              )\n            } else {\n              const fileURIs = await getAllURIsFromPack(uuid)\n              fileURIs.forEach(fileURI => store.dispatch({ type: 'fileRendering/fileUnlinked', fileURI }))\n              await deleteFilesOfPack(uuid)\n            }\n            props.reloadPacks()\n          }\n        }\n      ]\n    )\n  }\n\n  return (\n    <Stack className={styles.filters}>\n      <div className={styles.text}>\n        <MdFilterList />\n        <Typography variant='overline' color='text.secondary'>\n          \n        </Typography>\n      </div>\n      {props.packs.map((pack, i) =>\n        <FormControlLabel\n          key={i}\n          control={\n            <Checkbox\n              checked={Boolean(props.checkboxes[i]?.checked)}\n              onChange={e => handleChange(e, i)}\n            />\n          }\n          className={styles.checkbox}\n          label={pack === null ? ' ' : pack.name}\n          onContextMenu={handleOpenMenu(pack === null ? null : pack.uuid)}\n        />\n      )}\n    </Stack>\n  )\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport styles from './styles.module.scss'\nimport Grid from '@mui/material/Grid'\nimport IconButton from '@mui/material/IconButton'\nimport { MdInfoOutline, MdDelete } from 'react-icons/md'\nimport Dialog from '@mui/material/Dialog'\nimport DialogTitle from '@mui/material/DialogTitle'\nimport DialogContent from '@mui/material/DialogContent'\nimport Button from '@mui/material/Button'\nimport filesize from 'filesize'\nimport { symbols } from 'components/ImageField'\nimport { formatDate } from '../../utils'\nimport { deleteFile } from 'localStorage/fileStorage'\nimport store from 'reducers/index'\nimport { ContextMenuActions } from 'components/ContextMenu'\n\nFile.propTypes = {\n  file: PropTypes.object,\n  handleSelect: PropTypes.func,\n  onRemove: PropTypes.func\n}\n\nexport default function File(props) {\n  const [fileSrc, setFileSrc] = React.useState()\n  const [infoDialogueOpen, setInfoDialogueOpen] = React.useState(false)\n  const [removing, setRemoving] = React.useState(false)\n  const contextMenuActions = React.useContext(ContextMenuActions)\n\n  React.useEffect(() => {\n    const src = URL.createObjectURL(props.file.miniature)\n    setFileSrc(src)\n    return () => URL.revokeObjectURL(src)\n  }, [props.file.miniature])\n\n  const handleSelect = () => props.handleSelect(props.file.fileURI)\n\n  const handleShowInfo = e => {\n    e.stopPropagation()\n    setInfoDialogueOpen(true)\n  }\n\n  const handleCloseInfo = e => {\n    if(removing) return false\n    e.stopPropagation()\n    setInfoDialogueOpen(false)\n  }\n\n  const handleDeleteFile = async () => {\n    const fileURI = props.file.fileURI\n    setRemoving(true)\n    await deleteFile(fileURI)\n    store.dispatch({ type: 'fileRendering/fileUnlinked', fileURI })\n    setRemoving(false)\n    props.onRemove()\n    setInfoDialogueOpen(false)\n  }\n\n  const handleOpenMenu = e => {\n    contextMenuActions.open(e, [\n      { name: '', icon: <MdDelete />, action: () => handleDeleteFile() }\n    ])\n  }\n\n  return (\n    <>\n      <Grid\n        item xs={4} md={6} sm={12}\n        className={styles.item}\n        onClick={handleSelect}\n        onContextMenu={handleOpenMenu}\n      >\n        <div className={styles.itemInner}>\n          <IconButton\n            className={styles.button}\n            size='small'\n            onClick={handleShowInfo}\n          >\n            <MdInfoOutline />\n          </IconButton>\n          <div className={styles.preview}>\n            <img src={fileSrc} className={styles.foreground} />\n            <img src={fileSrc} className={styles.background} />\n          </div>\n          <div className={styles.fileName}>{props.file.fileName}</div>\n        </div>\n      </Grid>\n      <Dialog\n        open={infoDialogueOpen}\n        onClose={handleCloseInfo}\n      >\n        <DialogTitle className={styles.title}>   {props.file.filename}</DialogTitle>\n        <DialogContent>\n          <p> : <b>{filesize(props.file.blob.size, { symbols })}</b></p>\n          <p> : <b>{formatDate(new Date(props.file.addedAt))}</b></p>\n          <Button\n            variant='contained'\n            className={styles.delete}\n            onClick={handleDeleteFile}\n            disabled={removing}\n          > </Button>\n        </DialogContent>\n      </Dialog>\n    </>\n  )\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport styles from './styles.module.scss'\nimport Grid from '@mui/material/Grid'\nimport { getRecent } from 'localStorage/fileStorage'\nimport File from './File'\nimport Typography from '@mui/material/Typography'\n\nList.propTypes = {\n  packs: PropTypes.array,\n  handleSelect: PropTypes.func\n}\n\nexport default function List(props) {\n  const [files, setFiles] = React.useState([])\n\n  React.useEffect(() => { mapFiles() }, [props.packs])\n\n  const mapFiles = async () => {\n    const files = await getRecent(Object.keys(props.packs))\n    const mappedFiles = []\n    let packSwitchUUID\n    for (let file of files) {\n      if(packSwitchUUID !== file.packUUID){\n        packSwitchUUID = file.packUUID\n        mappedFiles.push({\n          packName: props.packs[packSwitchUUID],\n          files: [file]\n        })\n      } else {\n        mappedFiles[mappedFiles.length - 1].files.push(file)\n      }\n    }\n    setFiles(mappedFiles)\n  }\n\n  return (\n    <div className={styles.list}>\n      <div className={styles.content}>\n        {\n          files.length\n            ? files.map((packGroup, i) => <div key={i}>\n              <div className={styles.packDivider}>\n                {packGroup.packName\n                  ? <> <b>{packGroup.packName}</b></>\n                  : <> </>\n                }\n              </div>\n              <Grid container spacing={2} className={styles.grid}>\n                {packGroup.files.map((file, j) =>\n                  <File\n                    file={file}\n                    key={`${i}_${j}`}\n                    handleSelect={props.handleSelect}\n                    onRemove={mapFiles}\n                  />\n                )}\n              </Grid>\n            </div>)\n            : <div className={styles.noFilesYet}>\n              <Typography className={styles.hint}>  </Typography>\n              <Typography className={styles.hint}>  </Typography>\n              <Typography className={styles.hint}>    </Typography>\n            </div>\n        }\n      </div>\n    </div>\n  )\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport Dropzone from 'react-dropzone'\nimport styles from './styles.module.scss'\nimport { MdFileUpload, MdDone } from 'react-icons/md'\nimport CircularProgress from '@mui/material/CircularProgress'\nimport { saveFile, allowedFileTypes } from 'localStorage/fileStorage'\nimport Button from '@mui/material/Button'\n\nUpload.propTypes = {\n  packUUID: PropTypes.string,\n  setTab: PropTypes.func\n}\n\nexport default function Upload(props) {\n  const [uploading, setUploading] = React.useState(false)\n  const [uploadingFileIndex, setUploadingFileIndex] = React.useState()\n  const [filesListLength, setFilesListLength] = React.useState()\n  const [errors, setErrors] = React.useState([])\n  const [uploaded, setUploaded] = React.useState(false)\n\n  const handleDrop = async files => {\n    setUploaded(false)\n    setUploading(true)\n    setFilesListLength(files.length)\n    const errors = []\n    let hasErrors = false\n    for (let fileIndex in files) {\n      setUploadingFileIndex(Number(fileIndex)+1)\n      const file = files[fileIndex]\n      file.filename = file.name\n      try {\n        await saveFile(file, props.packUUID)\n      } catch(e) {\n        console.error(e)\n        hasErrors = true\n        setErrors(errors.concat({ filename: file.name, errorMessage: e }))\n      }\n    }\n    setUploaded(true)\n    if(!hasErrors) {\n      setUploading(false)\n      props.setTab('added')\n    }\n  }\n\n  return (\n    !uploading\n      ? <Dropzone\n        onDropAccepted={handleDrop}\n        accept={allowedFileTypes}\n      >\n        {({ getRootProps, getInputProps }) => (\n          <div className={styles.dropzone} {...getRootProps()}>\n            <input {...getInputProps()} />\n            <span className={styles.flex}><MdFileUpload />  -</span>\n            <span className={styles.supportedTypes}>\n              <span>  :</span>\n              <span>: png, jpeg, gif</span>\n              <span>: mp3, wav, ogg</span>\n              <span>: mp4</span>\n            </span>\n          </div>\n        )}\n      </Dropzone>\n      : <div className={styles.uploadingFiles}>\n        <div className={styles.uploadingScreen}>\n          <div className={styles.uploadingCaption}>\n            { !uploaded\n              ? <>\n                <CircularProgress size={20} thickness={10} />\n                <span className={styles.caption}>  {uploadingFileIndex}  {filesListLength}</span>\n              </>\n              : <>\n                <MdDone />\n                <span className={styles.caption}>{errors.length < filesListLength ? ' ' : ' '}</span>\n              </>\n            }\n          </div>\n          {Boolean(errors.length) && <div className={styles.errors}>\n            <span>    :</span>\n            {errors.map((error, i) => <span key={i}> {error.filename}: {\n              {\n                'File with such hash already exist': '      '\n              }[error.errorMessage]\n            }</span>)}\n          </div>}\n          {uploaded && <Button variant='contained' onClick={() => setUploading(false)}></Button>}\n        </div>\n      </div>\n  )\n}\n","import React from 'react'\nimport styles from './styles.module.scss'\nimport Dialog from '@mui/material/Dialog'\nimport DialogTitle from '@mui/material/DialogTitle'\nimport IconButton from '@mui/material/IconButton'\nimport DialogContent from '@mui/material/DialogContent'\nimport { MdClose } from 'react-icons/md'\nimport { emptyFunc } from '../../utils'\nimport Filters from './Filters'\nimport { loadLocalPacks } from 'localStorage/localPacks'\nimport { getDeletedPacks } from 'localStorage/fileStorage'\nimport List from './List'\nimport Tabs from '@mui/material/Tabs'\nimport Tab from '@mui/material/Tab'\nimport Upload from './Upload'\n\nconst FileStorage = React.forwardRef((props, ref) => {\n  const [tab, setTab] = React.useState('added')\n  const [open, setOpen] = React.useState(false)\n  const [callback, setCallback] = React.useState(() => emptyFunc)\n  const [packs, setPacks] = React.useState([])\n  const [packUUID, setPackUUID] = React.useState([])\n  const [checkboxes, setCheckboxes] = React.useState([])\n\n  const handleClose = () => {\n    setOpen(false)\n    setCallback(() => emptyFunc)\n  }\n\n  const handleSelect = selectedFile => {\n    handleClose()\n    setTimeout(() => callback(selectedFile), 1)\n  }\n\n  React.useImperativeHandle(ref, () => ({\n    async open(packUUID, callback) {\n      setCallback(() => callback)\n      await loadPacks()\n      setOpen(true)\n      setPackUUID(packUUID)\n    }\n  }))\n\n  const loadPacks = async () => {\n    const packs = await loadLocalPacks()\n    const deletedPacks = await getDeletedPacks()\n    if(deletedPacks.length) packs.push(null)\n    setPacks(packs)\n    setCheckboxes(\n      packs.map(\n        pack => {\n          const deletedPack = pack === null\n          const packUUID = deletedPack ? null : pack.uuid\n          const checked = checkboxes.find(({ uuid }) => uuid === packUUID)?.checked\n          return (\n            {\n              uuid: packUUID,\n              checked: checked !== undefined\n                ? Boolean(checked)\n                : !deletedPack\n            }\n          )\n        }\n      )\n    )\n  }\n\n  const filteredPacks = Object.fromEntries(checkboxes\n    .filter(cb => cb.checked)\n    .map(checkedPack => ([checkedPack.uuid,\n      checkedPack.uuid === null\n        ? ' '\n        : packs.find(pack => pack.uuid === checkedPack.uuid)?.name\n    ])\n    )\n  )\n\n  return (\n    <Dialog\n      open={open}\n      onClose={handleClose}\n    >\n      <DialogTitle className={styles.title}>\n        <span> </span>\n        <IconButton\n          onClick={handleClose}\n          className={styles.close}\n          sx={{ color: theme => theme.palette.grey[500] }}\n        >\n          <MdClose />\n        </IconButton>\n      </DialogTitle>\n      <DialogContent className={styles.dialog}>\n        <Tabs\n          value={tab} variant='fullWidth'\n          onChange={(_, tab) => setTab(tab)}\n          textColor='inherit'\n          className={styles.tabs}\n        >\n          <Tab label='' value='added' />\n          <Tab label='' value='upload' />\n        </Tabs>\n        {\n          tab === 'added' &&\n          <div className={styles.files}>\n            <Filters\n              packs={packs}\n              checkboxes={checkboxes}\n              onChange={setCheckboxes}\n              reloadPacks={loadPacks}\n            />\n            <List\n              packs={filteredPacks}\n              handleSelect={handleSelect}\n            />\n          </div>\n        }\n        {\n          tab === 'upload' &&\n          <div className={styles.upload}>\n            <Upload packUUID={packUUID} setTab={setTab} />\n          </div>\n        }\n      </DialogContent>\n    </Dialog>\n  )\n})\n\nFileStorage.displayName = 'FileStorage'\nexport default FileStorage\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport styles from './styles.module.scss'\nimport Typography from '@mui/material/Typography'\nimport Button from '@mui/material/Button'\nimport { getFile } from 'localStorage/fileStorage'\nimport filesize from 'filesize'\nexport const symbols = { B: '', kB: '', MB: '', GB: '', TB: '', PB: '', EB: '', ZB: '', YB: '' }\nimport FileStorage from 'components/FileStorage'\nimport { connect } from 'react-redux'\nimport CircularProgress from '@mui/material/CircularProgress'\nimport { MdErrorOutline } from 'react-icons/md'\nimport store from 'reducers/index'\n\nImageField.propTypes = {\n  label: PropTypes.string,\n  value: PropTypes.string,\n  name: PropTypes.string,\n  pack: PropTypes.object,\n  dispatch: PropTypes.func,\n  onChange: PropTypes.func,\n}\n\nfunction ImageField(props) {\n  const [src, setSrc] = React.useState({})\n  const [srcUrl, setSrcUrl] = React.useState(null)\n  const [noFile, setNoFile] = React.useState(false)\n  const fileStorage = React.useRef()\n\n  React.useEffect(() => {\n    if(!src.fileURI) return\n    props.dispatch({ type: 'fileRendering/setFileUnlinkCallback', fileURI: src.fileURI, callback: () => setNoFile(true) })\n  }, [setNoFile])\n\n  React.useEffect(() => {\n    const fileURI = props.value\n    let cleanup = () => {}\n    setSrcUrl()\n    if(fileURI) {\n      (async () => {\n        const file = await getFile(fileURI)\n        if(!file) return setNoFile(true)\n\n        setNoFile(false)\n\n        const blob = file.miniature\n        const name = file.fileName\n        const size = blob.size\n        setSrc({ name, size })\n\n        const url = URL.createObjectURL(blob)\n        setSrcUrl(url)\n        props.dispatch({ type: 'fileRendering/fileRenderingStarted', fileURI: file.fileURI, callback: () => setNoFile(true) })\n\n        cleanup = () => {\n          URL.revokeObjectURL(url)\n          store.dispatch({ type: 'fileRendering/fileRenderingStopped', fileURI: file.fileURI })\n        }\n      })()\n    } else {\n      setSrc({})\n      setSrcUrl(null)\n    }\n    return () => cleanup()\n  }, [props.value])\n\n  const handleClick = async () => {\n    let result = await new Promise(resolve => fileStorage.current.open(props.pack.uuid, resolve))\n    if(!result) { return }\n    props.onChange(result)\n  }\n\n  const handleClear = () => {\n    setNoFile(false)\n    props.onChange(undefined)\n  }\n\n  return (\n    <div className={styles.container}>\n      <Typography\n        variant='body'\n        color='text.primary'\n        gutterBottom\n        className={styles.label}\n      >{props.label}:</Typography>\n      <div className={styles.preview}>\n        { srcUrl === null\n          ? <Placeholder onClick={handleClick} />\n          : noFile\n            ? <FileMissingIcon onClick={handleClick} />\n            : srcUrl !== undefined\n              ? <Image src={src} srcUrl={srcUrl} label={props.label} onClick={handleClick} />\n              : <Loading />\n        }\n        <div className={styles.info}>\n          { noFile\n            ? <FileMissing />\n            : src.size\n              ? <FileInfo src={src} />\n              : <FileNotSelected />\n          }\n          <Button\n            variant='contained'\n            onClick={handleClear}\n            disabled={!srcUrl && !noFile}\n          > </Button>\n        </div>\n      </div>\n      <FileStorage ref={fileStorage} />\n    </div>\n  )\n}\n\nPlaceholder.propTypes = FileMissingIcon.propTypes = { onClick: PropTypes.func }\nfunction Placeholder({ onClick }) {\n  return (\n    <div className={styles.placeholder} onClick={onClick}>\n      <span>,  </span>\n    </div>\n  )\n}\n\nfunction FileMissingIcon({ onClick }) {\n  return (\n    <div className={styles.fileMissing} onClick={onClick}>\n      <MdErrorOutline className={styles.icon} />\n    </div>\n  )\n}\n\nfunction FileMissing() {\n  return (\n    <span>\n        . ,   ,      .\n    </span>\n  )\n}\n\nFileInfo.propTypes = { src: PropTypes.object }\nfunction FileInfo({ src }) {\n  return (\n    <>\n      <span> : {src.name}</span>\n      <span> : {filesize(src.size, { symbols })}</span>\n    </>\n  )\n}\n\nfunction FileNotSelected() {\n  return (\n    <>\n      <span>  </span>\n      <span> ,    .</span>\n    </>\n  )\n}\n\nfunction Loading() {\n  return (\n    <div className={styles.loading}>\n      <CircularProgress />\n    </div>\n  )\n}\n\nImage.propTypes = {\n  src: PropTypes.object,\n  srcUrl: PropTypes.string,\n  onClick: PropTypes.func,\n  label: PropTypes.string\n}\nfunction Image({ src, srcUrl, onClick, label }) {\n  return (\n    <img\n      src={srcUrl}\n      alt={srcUrl ? `   ${label}   ${src.name}` : ''}\n      onClick={onClick}\n      className={styles.image}\n    />\n  )\n}\n\nexport default connect(state => ({ pack: state.pack, fileRendering: state.fileRendering }))(ImageField)\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport TextField from '@mui/material/TextField'\nimport Autocomplete from '@mui/material/Autocomplete'\nimport MenuItem from '@mui/material/MenuItem'\nimport Select from '@mui/material/Select'\nimport FormControl from '@mui/material/FormControl'\nimport InputLabel from '@mui/material/InputLabel'\nimport FormHelperText from '@mui/material/FormHelperText'\nimport FormControlLabel from '@mui/material/FormControlLabel'\nimport Checkbox from '@mui/material/Checkbox'\nimport Slider from '@mui/material/Slider'\nimport styles from './styles.module.scss'\nimport ImageField from 'components/ImageField'\n\nconst formikMuiErrors = (formik, name) => ({\n  error: Boolean(formik.errors[name]),\n  helperText: formik.errors[name]\n})\n\nFormikTextField.propTypes =\nFormikAutocomplete.propTypes =\nFormikCheckbox.propTypes =\nFormikImageField.propTypes =\n{\n  name: PropTypes.string,\n  formik: PropTypes.object\n}\n\nexport function FormikTextField(props) {\n  const { name, formik, ...fieldProps } = props\n\n  const handleChange = e => {\n    formik.handleChange(e)\n    formik.setTouched({ ...formik.touched, [name]: true })\n  }\n\n  return (\n    <TextField\n      name={name}\n      value={formik.values[name]}\n      onChange={handleChange}\n      {...formikMuiErrors(formik, name)}\n      {...fieldProps}\n    />\n  )\n}\n\n\nexport function FormikAutocomplete(props) {\n  const { formik, name, ...field } = props\n\n  const handleChange = (_, value) => {\n    formik.setFieldValue(name, value)\n    formik.setTouched({ ...formik.touched, [name]: true })\n  }\n\n  let value = formik.values[name] ?? []\n  if(value.length === 1 && value[0] === '') value = []\n\n  const handleKeyDown = e => {\n    if(e.key === 'Enter') {\n      e.preventDefault()\n    }\n  }\n\n  return (\n    <Autocomplete\n      {...field}\n      multiple\n      options={[]}\n      value={value}\n      getOptionLabel={(option) => option}\n      freeSolo clearOnBlur={true}\n      onChange={handleChange}\n      renderInput={props => (\n        <TextField\n          {...field}\n          {...props}\n          {...formikMuiErrors(formik, name)}\n          placeholder=' Enter,  '\n          onKeyDown={handleKeyDown}\n        />\n      )}\n    />\n  )\n}\n\nFormikSelect.propTypes = { ...FormikTextField.propTypes, options: PropTypes.object }\nexport function FormikSelect(props) {\n  const { formik, name, options, ...field } = props\n  const error = { error: Boolean(formik.errors[name]) }\n\n  const handleChange = e => {\n    formik.handleChange(e)\n    formik.setTouched({ ...formik.touched, [name]: true })\n  }\n\n  return (\n    <FormControl fullWidth>\n      <InputLabel {...error}>{props.label}</InputLabel>\n      <Select\n        {...field}\n        name={name}\n        value={formik.values[name]}\n        onChange={handleChange}\n        {...error}\n      >\n        {Object.entries(options).map(([id, label]) => <MenuItem value={id} key={id}>{label}</MenuItem>)}\n      </Select>\n      <FormHelperText error>{formik.errors[name] && formik.errors[name]}</FormHelperText>\n    </FormControl>\n  )\n}\n\nexport function FormikCheckbox(props) {\n  const { formik, name, ...field } = props\n\n  const handleChange = e => {\n    formik.handleChange(e)\n    formik.setTouched({ ...formik.touched, [name]: true })\n  }\n\n  return (\n    <FormControlLabel\n      control={\n        <Checkbox\n          name={name}\n          checked={formik.values[name]}\n          onChange={handleChange}\n        />\n      }\n      {...field}\n    />\n  )\n}\n\nFormikSlider.propTypes = {\n  ...FormikTextField.propTypes,\n  defaultValue: PropTypes.number,\n}\nexport function FormikSlider(props) {\n  const { formik, name, ...field } = props\n  const [value, setValue] = React.useState(formik.values[name])\n\n  const handleChange = value => {\n    setValue(value)\n    formik.setTouched({ ...formik.touched, [name]: true })\n  }\n\n  React.useEffect(() => formik.setFieldValue(name, value), [value])\n\n  return (\n    <div className={styles.slider}>\n      <span>{field.label}</span>\n      <Slider\n        name={name}\n        value={value}\n        onChange={e => requestAnimationFrame(() => handleChange(e.target.value))}\n        valueLabelDisplay='auto'\n        marks\n        {...field}\n      />\n    </div>\n  )\n}\n\nexport function FormikImageField(props) {\n  const { formik, name, ...field } = props\n\n  const handleChange = fileURI => {\n    formik.setFieldValue(name, fileURI ?? '')\n    let touched = { ...formik.touched }\n    if(fileURI !== undefined || formik.initialValues[name] !== (fileURI ?? '')) {\n      touched = { ...formik.touched, [name]: true }\n    } else {\n      const formikTouched = { ...formik.touched }\n      delete formikTouched[name]\n      touched = formikTouched\n    }\n    formik.setTouched(touched)\n  }\n\n  return (\n    <ImageField\n      {...field}\n      value={formik.values[name]}\n      onChange={handleChange}\n    />\n  )\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport styles from './styles.module.scss'\nimport { useFormik } from 'formik'\nimport * as yup from 'yup'\nimport { componentsPropTypes, format } from '../../../consts'\nimport {\n  FormikTextField,\n  FormikAutocomplete,\n  FormikSelect,\n  FormikCheckbox,\n  FormikSlider,\n  FormikImageField\n} from 'components/FormikField'\nimport { connect } from 'react-redux'\nimport Button from '@mui/material/Button'\nimport { useBeforeunload } from 'react-beforeunload'\nimport { useHistory, Prompt } from 'react-router-dom'\nimport { saveLocalPack } from 'localStorage/localPacks'\nimport { initValues, mapPackState } from '../../../utils'\n\nconst validationSchema = yup.object({\n  logo: yup\n    .string('  '),\n  name: yup\n    .string('  ')\n    .required('  '),\n  authors: yup\n    .array()\n    .ensure()\n    .min(1, '  ')\n    .required('  '),\n  publisher: yup\n    .string(' '),\n  difficulty: yup\n    .number('  ')\n    .positive()\n    .min(1)\n    .max(10)\n    .integer('   ')\n    .required('  '),\n  comment: yup\n    .string(' '),\n  tags: yup\n    .array().ensure(),\n  language: yup\n    .string('  ')\n    .required('  '),\n  over18: yup\n    .bool('  ')\n})\n\nSettings.propTypes = {\n  pack: PropTypes.shape(componentsPropTypes),\n  dispatch: PropTypes.func\n}\n\nfunction Settings(props) {\n  const [submitting, setSubmitting] = React.useState(false)\n  const history = useHistory()\n  const initialValues = initValues(validationSchema, props.pack)\n\n  const formik = useFormik({\n    initialValues,\n    validationSchema,\n    validateOnChange: false,\n    validateOnBlur: false,\n    onSubmit: async (values) => {\n      console.log(values.authors)\n      setSubmitting(true)\n      let pack = { ...props.pack, ...values }\n      await saveLocalPack(pack)\n      props.dispatch({ type: 'pack/load', pack })\n      history.push(`/pack/${pack.uuid}`)\n    },\n  })\n\n  useBeforeunload((event) => {\n    if(Object.keys(formik.touched).length) event.preventDefault()\n  })\n  console.log(formik.values);\n\n  return (\n    <div className={styles.container}>\n      <form onSubmit={formik.handleSubmit} className={styles.form}>\n        <FormikTextField\n          name='name'\n          formik={formik}\n          label=''\n          disabled={submitting}\n        />\n        <FormikAutocomplete\n          name='authors'\n          formik={formik}\n          label=''\n          disabled={submitting}\n        />\n        <FormikImageField\n          name='logo'\n          formik={formik}\n          label=''\n        />\n        <FormikTextField\n          name='publisher'\n          formik={formik}\n          label='  ()'\n          disabled={submitting}\n        />\n        <FormikSlider\n          name='difficulty'\n          label=''\n          formik={formik}\n          disabled={submitting}\n          step={1} min={1} max={10}\n        />\n        <FormikSelect\n          name='language'\n          formik={formik}\n          label=' '\n          options={{\n            '': ' ',\n            'ru-RU': ' (ru-RU)',\n            'en-US': ' (en-US)'\n          }}\n          disabled={submitting}\n        />\n        <FormikTextField\n          name='comment'\n          formik={formik}\n          label=' ()'\n          disabled={submitting}\n        />\n        <FormikAutocomplete\n          name='tags'\n          formik={formik}\n          label=' ()'\n          disabled={submitting}\n        />\n        <FormikCheckbox\n          name='over18'\n          formik={formik}\n          label='  18+'\n          disabled={submitting}\n        />\n        <Button\n          color='primary'\n          variant='contained'\n          type='submit'\n          disabled={!Object.keys(formik.touched).length || submitting}\n        >\n          \n        </Button>\n      </form>\n      <Prompt\n        when={Object.keys(formik.touched).length && !submitting}\n        message='   ,   ?'\n      />\n      <div className={styles.info}>\n        <ul>\n          <li> XML   : <span>{format.xmlVersion}</span></li>\n          <li>   : <span>{format.encoding}</span></li>\n          <li> : <span>{props.pack.version}</span></li>\n          <li>UUID: <span>{props.pack.uuid}</span></li>\n          <li> : <span>{props.pack.date}</span></li>\n        </ul>\n      </div>\n    </div>\n  )\n}\n\nexport default connect(mapPackState)(Settings)\n","import Typography from '@mui/material/Typography'\nimport styles from './styles.module.scss'\n\nexport default function NotFound404() {\n  return (\n    <div className={styles.centered}>\n      <Typography variant='h1'>  </Typography>\n    </div>\n  )\n}\n","import PropTypes from 'prop-types'\nimport styles from './styles.module.scss'\nimport TableContainer from '@mui/material/TableContainer'\nimport Table from '@mui/material/Table'\nimport TableRow from '@mui/material/TableRow'\nimport TableCell from '@mui/material/TableCell'\nimport TableBody from '@mui/material/TableBody'\nimport Paper from '@mui/material/Paper'\nimport ButtonBase from '@mui/material/ButtonBase'\nimport { useRouteMatch } from 'react-router'\nimport { Link } from 'react-router-dom'\nimport Typography from '@mui/material/Typography'\n\nRoundTable.propTypes = { themes: PropTypes.array }\nexport default function RoundTable(props) {\n  const { url } = useRouteMatch()\n\n  return (\n    <TableContainer\n      component={Paper}\n      className={styles.table}\n    >\n      <Table>\n        <TableBody>\n          {props.themes.map((row, i) => (\n            <TableRow\n              key={i}\n              sx={{ '&:last-child td, &:last-child th': { borderBottom: 0 } }}\n            >\n              <TableCell component='th' scope='row' className={styles.rowName}>{row.name}</TableCell>\n              {\n                row.questions.length\n                  ? row.questions.map((question, j) =>\n                    <TableCell key={j} className={styles.tableCell}>\n                      <Link to={`${url}/themes/${i+1}/questions/${question.price}`}>\n                        <ButtonBase className={styles.buttonBase}>\n                          {question.price}\n                        </ButtonBase>\n                      </Link>\n                    </TableCell>)\n                  : <TableCell align='right' colspan='1000'>\n                    <Typography color='text.secondary' variant='caption'>  </Typography>\n                  </TableCell>\n              }\n            </TableRow>\n          ))}\n        </TableBody>\n      </Table>\n    </TableContainer>\n  )\n}\n","import PropTypes from 'prop-types'\nimport styles from './styles.module.scss'\nimport TableContainer from '@mui/material/TableContainer'\nimport Table from '@mui/material/Table'\nimport TableBody from '@mui/material/TableBody'\nimport TableHead from '@mui/material/TableHead'\nimport TableRow from '@mui/material/TableRow'\nimport TableCell from '@mui/material/TableCell'\nimport { MdImage, MdDone, MdMusicNote, MdVideocam, MdAdd } from 'react-icons/md'\nimport { useHistory, useRouteMatch } from 'react-router'\nimport { Link } from 'react-router-dom'\nimport Button from '@mui/material/Button'\nimport { connect } from 'react-redux'\nimport { mapPackState, questionTypes } from '../../../utils'\nimport Typography from '@mui/material/Typography'\n\n\nItemContent.propTypes = {\n  themeIndex: PropTypes.number,\n  theme: PropTypes.object,\n  pack: PropTypes.object\n}\n\nfunction ItemContent(props) {\n  const history = useHistory()\n  const route = useRouteMatch()\n\n  const sortedQuestions = props.theme.questions.sort((a,b) => a.price - b.price)\n\n  const questionType = type => questionTypes[type] || type\n\n  const questionURL = `${route.url}/themes/${props.themeIndex+1}/questions`\n  const handleOpenQuestion = price => () => history.push(`${questionURL}/${price}`)\n  const row = { sx: { '&:last-child td, &:last-child th': { border: 0 } } }\n  const cell1 = { component: 'th', scope: 'row' }\n\n  return (\n    <>\n      <TableContainer>\n        <Table sx={{ minWidth: 650 }}>\n          <TableHead>\n            <TableRow>\n              <TableCell></TableCell>\n              <Cell wp={10}></Cell>\n              <Cell wp={9}></Cell>\n              <Cell wp={4}> </Cell>\n              <Cell wp={1}><MdImage /></Cell>\n              <Cell wp={1}><MdMusicNote /></Cell>\n              <Cell wp={1}><MdVideocam /></Cell>\n            </TableRow>\n          </TableHead>\n          <TableBody>\n            {sortedQuestions.length\n              ? sortedQuestions.map((question, i) => (\n                <TableRow\n                  key={i}\n                  hover\n                  onClick={handleOpenQuestion(question.price)}\n                  className={styles.tableRow}\n                  {...row}\n                >\n                  <TableCell {...cell1}>{question.price}</TableCell>\n                  <Cell wp={10}>\n                    {question.scenario?.filter(({ type }) => type === 'text').map(({ data }) => data.text).join(', ')}\n                  </Cell>\n                  <Cell wp={10}>\n                    {question.correctAnswers?.map((answer, i, a) =>\n                      <span key={i}>{answer}{i !== a.length - 1 && ', '}</span>)}\n                    {question.incorrectAnswers?.length && ', '}\n                    {question.incorrectAnswers?.map((answer, i, a) => <>\n                      <span className={styles.strikethrough} key={i}>{answer}</span>\n                      {i !== a.length - 1 && ', '}\n                    </>)}\n                  </Cell>\n                  <Cell wp={3}>{questionType(question.type)}</Cell>\n                  <Cell wp={1}>{question.scenario?.some(({ type }) => type === 'image') && <MdDone />}</Cell>\n                  <Cell wp={1}>{question.scenario?.some(({ type }) => type === 'audio') && <MdDone />}</Cell>\n                  <Cell wp={1}>{question.scenario?.some(({ type }) => type === 'movie') && <MdDone />}</Cell>\n                </TableRow>\n              ))\n              : <TableRow {...row}>\n                <TableCell {...cell1} colSpan={7}>\n                  <Typography color='text.secondary' variant='caption'>  </Typography>\n                </TableCell>\n              </TableRow>}\n          </TableBody>\n        </Table>\n      </TableContainer>\n      <Link to={`${questionURL}/add`}>\n        <Button\n          color='primary'\n          startIcon={<MdAdd />}\n        > </Button>\n      </Link>\n    </>\n  )\n}\n\nCell.propTypes = { wp: PropTypes.number, children: PropTypes.node }\nfunction Cell(props) {\n  return (\n    <TableCell align='right' style={{ width: props.wp/26*100+'%' }}>{props.children}</TableCell>\n  )\n}\n\nexport default connect(mapPackState)(ItemContent)\n","import PropTypes from 'prop-types'\n\nconst ClickIsolator = props => (\n  <div onClick={e => e.stopPropagation()} {...props}>{props.children}</div>\n)\n\nClickIsolator.propTypes = { children: PropTypes.any }\nClickIsolator.displayName = 'ClickIsolator'\nexport default ClickIsolator\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport styles from './styles.module.scss'\nimport ItemContent from './Questions'\nimport Item from 'components/ItemsList/Item'\nimport { connect } from 'react-redux'\nimport { MdDelete, MdExpandMore } from 'react-icons/md'\nimport IconButton from '@mui/material/IconButton'\nimport Accordion from '@mui/material/Accordion'\nimport AccordionSummary from '@mui/material/AccordionSummary'\nimport AccordionDetails from '@mui/material/AccordionDetails'\nimport TextField from '@mui/material/TextField'\nimport ClickIsolator from 'components/ClickIsolator'\nimport { mapPackState } from '../../../utils'\nimport Handle from 'components/ItemsList/Handle'\n\nTheme.propTypes = {\n  item: PropTypes.object,\n  pack: PropTypes.object,\n  index: PropTypes.number,\n  expandId: PropTypes.number,\n  setExpand: PropTypes.func,\n  draggableId: PropTypes.string,\n  handleRemoveTheme: PropTypes.func,\n  handleChangeThemeName: PropTypes.string,\n}\n\nfunction Theme(props) {\n  const theme = props.item\n  const expand = props.draggableId === props.expandId\n  const [themeName, setThemeName] = React.useState(theme.name)\n\n  const handleDelete = e => {\n    e.stopPropagation()\n    props.handleRemoveTheme(props.index)\n  }\n\n  const handleChangeThemeName = e => {\n    const newThemeName = e.target.value\n    setThemeName(newThemeName)\n    props.handleChangeThemeName(props.index, newThemeName)\n  }\n\n  return (\n    <Item\n      index={props.index}\n      draggableId={theme.id.toString()}\n    >\n      {(provided) => <Accordion\n        expanded={expand}\n        onChange={(_, isExpand) => props.setExpand(isExpand ? theme.id : undefined)}\n      >\n        <AccordionSummary\n          expandIcon={<MdExpandMore />}\n        >\n          <div className={styles.toolbar}>\n            <Handle provided={provided} />\n            <ClickIsolator className={styles.name}>\n              <TextField\n                value={themeName}\n                label=' '\n                variant='outlined'\n                onChange={handleChangeThemeName}\n                size='small'\n                fullWidth\n              />\n            </ClickIsolator>\n            <IconButton\n              onClick={handleDelete}\n              className={styles.delete}\n            >\n              <MdDelete className={styles.delete} />\n            </IconButton>\n          </div>\n        </AccordionSummary>\n        <AccordionDetails>\n          <ItemContent theme={theme} themeIndex={props.index} />\n        </AccordionDetails>\n      </Accordion>}\n    </Item>\n  )\n}\n\nexport default connect(mapPackState)(Theme)\n","import PropTypes from 'prop-types'\nimport styles from './styles.module.scss'\nimport AddItem from 'components/ItemsList/AddItem'\nimport ItemsList from 'components/ItemsList'\nimport Theme from './Theme'\n\nThemesEditing.propTypes = {\n  onDragEnd: PropTypes.func,\n  themes: PropTypes.array,\n  expand: PropTypes.bool,\n  setExpand: PropTypes.func,\n  setEditing: PropTypes.func,\n  handleAddTheme: PropTypes.func,\n  handleRemoveTheme: PropTypes.func,\n  handleChangeThemeName: PropTypes.func\n}\nexport default function ThemesEditing(props) {\n  return (\n    <>\n      <ItemsList\n        droppableId='themes'\n        onDragEnd={props.onDragEnd}\n        list={props.themes}\n        draggableProps={{\n          setExpand: props.setExpand,\n          handleRemoveTheme: props.handleRemoveTheme,\n          handleChangeThemeName: props.handleChangeThemeName,\n          expandId: props.expand\n        }}\n        noItemsLabel='   '\n        itemComponent={Theme}\n        useIdAsKey={true}\n      />\n      <AddItem\n        onAdd={props.handleAddTheme}\n        inputLabel=' '\n        buttonLabel=' '\n        className={styles.addTheme}\n      />\n    </>\n  )\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport { useLocation } from 'react-router'\nimport { uuidRegex } from '../../../consts'\nimport { saveLocalPack } from 'localStorage/localPacks'\nimport clone from 'just-clone'\nimport NotFound404 from 'components/NotFound404'\nimport RoundTable from './RoundTable'\nimport ThemesEditing from './ThemesEditing'\nimport EditingToolbar from 'components/EditingToolbar'\nimport { mapPackState } from '../../../utils'\n\nRoundThemes.propTypes = {\n  pack: PropTypes.object,\n  dispatch: PropTypes.func\n}\n\nfunction RoundThemes(props) {\n  const [themes, setThemes] = React.useState([])\n  const [found, setFound] = React.useState()\n  const route = useLocation()\n  const roundIndex = route.pathname.split(new RegExp(`/pack/${uuidRegex}/rounds/`), 2)[1]\n  const [expand, setExpand] = React.useState()\n  let [editing, setEditing] = React.useState(false)\n\n  const reorder = (list, startIndex, endIndex) => {\n    const result = Array.from(list)\n    const [removed] = result.splice(startIndex, 1)\n    result.splice(endIndex, 0, removed)\n    return result\n  }\n\n  const round = props.pack.rounds[roundIndex-1]\n  React.useEffect(() => {\n    if(round) setFound(true)\n    else setFound(false)\n  }, [])\n\n  const handleAddTheme = async name => {\n    let roundThemes = [...themes]\n    roundThemes.push({ name, id: Date.now(), questions: [] })\n    updateThemes(roundThemes)\n  }\n\n  const onDragEnd = result => {\n    if (!result.destination) return\n    const items = reorder(themes, result.source.index, result.destination.index)\n    updateThemes(items)\n  }\n\n  const updateThemes = async items => {\n    setThemes(items)\n    const newPack = clone(props.pack)\n    newPack.rounds[roundIndex-1].themes = items\n    await saveLocalPack(newPack)\n    props.dispatch({ type: 'pack/load', pack: newPack })\n  }\n\n  const handleRemoveTheme = index => {\n    let roundThemes = [...themes]\n    roundThemes.splice(index, 1)\n    updateThemes(roundThemes)\n  }\n\n  const handleChangeThemeName = (index, newName) => {\n    let roundThemes = [...themes]\n    roundThemes[index].name = newName\n    updateThemes(roundThemes)\n  }\n\n  React.useEffect(() => {\n    round && setThemes(round.themes)\n  }, [])\n\n  return (\n    found !== undefined && (\n      found\n        ? <div>\n          <EditingToolbar\n            showButton={Boolean(themes.length)}\n            onSwitch={() => setEditing(!editing)}\n            editing={editing}\n            heading={`    ${round.name}`}\n          />\n          {themes.length && !editing\n            ? <RoundTable\n              themes={themes}\n            />\n            : <ThemesEditing\n              themes={themes}\n              onDragEnd={onDragEnd}\n              expand={expand}\n              setExpand={setExpand}\n              setEditing={setEditing}\n              handleAddTheme={handleAddTheme}\n              handleRemoveTheme={handleRemoveTheme}\n              handleChangeThemeName={handleChangeThemeName}\n            />\n          }\n        </div>\n        : <NotFound404 />\n    )\n  )\n}\n\nexport default connect(mapPackState)(RoundThemes)\n","export const questionPriceHint = <p>\n  <b> </b>    ,   100,   \n            (      ).\n       .\n</p>\n\nexport const questionTypesHint = <>\n  <p>\n    <b></b>    ,      ,      .\n       .         \n    ,    -      .    \n          .\n  </p>\n  <p>\n    <b>  ()</b>       ,     ( \n     ,   ),  ,   .   \n      .       .   - \n       . -    ,   -  \n        . ,    ,  \n         .      .\n  </p>\n  <p>\n    <b> </b>  ,   ,     ,   \n       .      ,   .\n  </p>\n  <p>\n    <b>  </b>      1 .     .\n          .\n  </p>\n  <p>\n    <b> </b>       ,  .    \n      ,    .        .\n  </p>\n</>\n\nexport const realPriceHint = <p>\n           ,         \n      .            .\n</p>\n\nexport const realPriceStepperHint = <>\n  <p>\n           ,         \n      .            .\n  </p>\n  <p>\n        ,       .\n  </p>\n</>\n\nexport const realThemeHint = '     ,       . \\\n     ,    .'\n\nexport const bagcatRealPriceTypeHint = <>\n  <p>\n           ,       ,  \n      ,     .\n  </p>\n  <p>\n                .   \n    <b>  </b>,      .\n  </p>\n  <p>\n      ,    ,      :  \n          .\n  </p>\n  <p>\n                    .\n       ,     \n  </p>\n</>\n\nexport const scenarioHint = <>\n  <p>\n        <b></b>   ,    .\n            , ,   ,\n      ,     100    .\n  </p>\n  <p>\n         ,       . ,      \n        /,   &quot;<i>[ ]</i>&quot;,  \n       ,   .    ,    \n           .\n  </p>\n</>\n","import PropTypes from 'prop-types'\nimport styles from './styles.module.scss'\nimport { GrCircleQuestion } from 'react-icons/gr'\nimport Tooltip from '@mui/material/Tooltip'\nimport IconButton from '@mui/material/IconButton'\n\nWithHint.propTypes = { hint: PropTypes.node, children: PropTypes.node }\nexport default function WithHint(props) {\n  return (\n    <div className={styles.hint}>\n      {props.children}\n      <Tooltip title={props.hint}>\n        <IconButton>\n          <GrCircleQuestion />\n        </IconButton>\n      </Tooltip>\n    </div>\n  )\n}\n","import PropTypes from 'prop-types'\nimport styles from './styles.module.scss'\nimport {\n  FormikTextField,\n  FormikSelect,\n  FormikCheckbox,\n  FormikAutocomplete\n} from 'components/FormikField'\nimport { questionTypes } from '../../../../utils'\nimport { questionPriceHint, questionTypesHint, realPriceHint, realPriceStepperHint, realThemeHint, bagcatRealPriceTypeHint } from './hints'\nimport WithHint from './WithHint'\nimport Typography from '@mui/material/Typography'\n\nFormFields.propTypes = {\n  formik: PropTypes.object,\n  submitting: PropTypes.bool\n}\nexport default function FormFields({ formik, submitting }) {\n  const fieldProps = {\n    formik, disabled: submitting\n  }\n\n  const numberFieldProps = {\n    ...fieldProps,\n    type: 'number',\n    InputProps: { inputProps: { min: 0, max: 4294967295 } }\n  }\n\n  return (\n    <>\n      <Typography variant='h6'>  </Typography>\n      <WithHint hint={questionPriceHint}>\n        <FormikTextField name='price' label='' {...numberFieldProps} />\n      </WithHint>\n      <WithHint hint={questionTypesHint}>\n        <FormikSelect name='type' label=' ' options={questionTypes} {...fieldProps} />\n      </WithHint>\n      {formik.values.type === 'cat' && <>\n        <WithHint hint={realPriceHint}>\n          <FormikTextField name='realprice' label='  ' {...numberFieldProps} />\n        </WithHint>\n        <WithHint hint={realThemeHint}>\n          <FormikTextField name='realtheme' label='  ' {...fieldProps} />\n        </WithHint>\n      </>}\n      {formik.values.type === 'bagcat' && <>\n        <WithHint hint={realThemeHint}>\n          <FormikTextField name='realtheme' label='  ' {...fieldProps} />\n        </WithHint>\n        <WithHint hint={bagcatRealPriceTypeHint}>\n          <FormikSelect\n            name='questionPriceType'\n            label='   '\n            options={{\n              'fixed': ' ',\n              'minMax': '         ',\n              'byPlayer': '      '\n            }}\n            {...fieldProps}\n          />\n        </WithHint>\n        {formik.values.questionPriceType === 'fixed' && <WithHint hint={realPriceHint}>\n          <FormikTextField name='realprice' label='  ' {...numberFieldProps} />\n        </WithHint>}\n        {formik.values.questionPriceType === 'byPlayer' && <WithHint hint={realPriceStepperHint}>\n          <div className={styles.grouped}>\n            <FormikTextField name='realpriceFrom' label='' {...numberFieldProps} />\n            <FormikTextField name='realpriceTo' label='' {...numberFieldProps} />\n            <FormikTextField name='realpriceStep' label='' {...numberFieldProps} />\n          </div>\n        </WithHint>}\n      </>}\n      {formik.values.type === 'bagcat' && <>\n        <FormikCheckbox name='transferToSelf' label='   ' {...fieldProps} />\n        <WithHint hint={<p>   <b></b>,    ,     </p>}>\n          <FormikSelect\n            name='detailsDisclosure'\n            label='    '\n            options={{\n              'before': '  ',\n              'after': '  ',\n              'never': ''\n            }}\n            {...fieldProps}\n          />\n        </WithHint>\n      </>}\n      <Typography variant='h6'></Typography>\n      <FormikAutocomplete\n        name='correctAnswers'\n        formik={formik}\n        label=' '\n        disabled={submitting}\n      />\n      <FormikAutocomplete\n        name='incorrectAnswers'\n        formik={formik}\n        label='  ()'\n        disabled={submitting}\n      />\n    </>\n  )\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport styles from './styles.module.scss'\nimport { MdDelete, MdExpandMore, MdImage, MdMusicNote, MdVideocam, MdShortText, MdRecordVoiceOver } from 'react-icons/md'\nimport Item from 'components/ItemsList/Item'\nimport Handle from 'components/ItemsList/Handle'\nimport Typography from '@mui/material/Typography'\nimport IconButton from '@mui/material/IconButton'\nimport Accordion from '@mui/material/Accordion'\nimport AccordionSummary from '@mui/material/AccordionSummary'\nimport AccordionDetails from '@mui/material/AccordionDetails'\nimport TextField from '@mui/material/TextField'\nimport Slider from '@mui/material/Slider'\nimport Decimal from 'decimal.js'\nimport ImageField from 'components/ImageField'\nimport Fade from '@mui/material/Fade'\n\nScenarioEvent.propTypes = {\n  index: PropTypes.number,\n  item: PropTypes.object,\n  onDelete: PropTypes.func,\n  onChangeDuration: PropTypes.func,\n  onChangeData: PropTypes.func,\n  draggableId: PropTypes.number,\n  formik: PropTypes.object,\n  scenario: PropTypes.object\n}\n\nexport default function ScenarioEvent(props) {\n  const [duration, setDuration] = React.useState()\n  const [eventData, setEventData] = React.useState()\n  const [expand, setExpand] = React.useState(false)\n  const formatTime = time => `${time.toFixed(1)} c.`\n\n  const handleDelete = e => {\n    e.stopPropagation()\n    props.onDelete(props.index)\n  }\n\n  React.useEffect(() => {\n    if(props.index !== undefined && duration !== undefined)\n      props.onChangeDuration(props.index, duration)\n  }, [duration])\n\n  React.useEffect(() => {\n    const scenarioEvent = props.scenario[props.index]\n    const data = scenarioEvent.data\n    const eventDuration = scenarioEvent.duration\n    !eventData && setEventData(data)\n    !duration && setDuration(eventDuration)\n  }, [props.scenario])\n\n  React.useEffect(() => eventData && requestAnimationFrame(() => props.onChangeData(props.index, eventData)), [eventData])\n\n  // 0.1 - 1.0 with step 0.1\n  // 1.0 - 10.0 with step 0.5\n  // 10.0 - 180.0 with step 1\n  const step0_1 = new Array(1/0.1).fill().map((_, i) => new Decimal(0.1).times(i+1).toNumber())\n  const step0_5 = new Array((10-1)/0.5).fill().map((_, i) => 1+(i+1)*0.5)\n  const step1 = new Array((30-10)/1).fill().map((_, i) => 10+1+i)\n  const step5 = new Array((60-30)/5).fill().map((_, i) => 30+(i+1)*5)\n  const durationMarks = [...step0_1, ...step0_5, ...step1, ...step5].map((value, i) => ({ _label: value, value: i }))\n\n  const closestToMarks = (duration, marks) => {\n    marks = marks.map(({ _label }) => _label)\n    for(let i = 0; i < marks.length; i++) {\n      if(marks[i] <= duration && marks[i+1] > duration) {\n        return i\n      }\n    }\n    return duration\n  }\n\n  return (\n    <Item\n      index={props.index}\n      draggableId={props.draggableId.toString()}\n    >\n      {(provided) => <Accordion expanded={expand} onChange={(_, expanded) => setExpand(expanded)}>\n        <AccordionSummary expandIcon={<MdExpandMore />}>\n          <div className={styles.item}>\n            <Handle provided={provided} />\n            <Typography variant='body1' className={styles.itemType}>\n              {{\n                image: '',\n                voice: '',\n                video: '',\n                text: '',\n                say: ' ',\n                marker: <i>[ ]</i>\n              }[props.item.type] ?? ` ${props.item.type}`}\n              <span className={styles.spacing} />\n              {{\n                'image': <MdImage />,\n                'voice': <MdMusicNote />,\n                'video': <MdVideocam />,\n                'text': <MdShortText />,\n                'say': <MdRecordVoiceOver />\n              }[props.item.type]}\n            </Typography>\n            {props.item.type !== 'marker' && (\n              <Fade in={!expand}>\n                <Typography variant='body2' color='text.secondary'>\n                  {formatTime(props.item.duration)}\n                </Typography>\n              </Fade>\n            )}\n            <IconButton\n              onClick={handleDelete}\n              className={styles.delete}\n            >\n              <MdDelete className={styles.delete} />\n            </IconButton>\n          </div>\n        </AccordionSummary>\n        <AccordionDetails>\n          <div className={styles.details}>\n            {props.item.type !== 'marker' && (\n              <div className={styles.duration}>\n                <Slider\n                  defaultValue={durationMarks.find(({ _label }) => _label === 3).value}\n                  step={null}\n                  marks={durationMarks}\n                  min={durationMarks[0].value}\n                  max={durationMarks[durationMarks.length - 1].value}\n                  valueLabelDisplay='off'\n                  valueLabelFormat={i => durationMarks[i]._label}\n                  value={duration !== undefined && closestToMarks(duration, durationMarks)}\n                  onChange={e => requestAnimationFrame(() => setDuration(durationMarks[e.target.value]._label))}\n                />\n                <TextField\n                  label=''\n                  variant='outlined'\n                  size='small'\n                  type='number'\n                  InputProps={{ inputProps: { min: 0.1, step: 0.1 } }}\n                  className={styles.time}\n                  value={duration}\n                  onChange={e => setDuration(Number(e.target.value))}\n                />\n              </div>\n            )}\n            {{\n              'text': <TextField\n                value={eventData?.text}\n                onChange={e => setEventData({ text: e.target.value })}\n                label=' '\n                multiline\n                rows={4}\n                fullWidth\n              />,\n              'image': <ImageField\n                value={eventData?.imageField}\n                onChange={newValue => setEventData({ imageField: newValue })}\n                label=''\n              />,\n              'marker': <Typography variant='caption'>\n                 ,   ,     .\n              </Typography>\n            }[props.item.type]}\n          </div>\n        </AccordionDetails>\n      </Accordion>}\n    </Item>\n  )\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport styles from './styles.module.scss'\nimport Typography from '@mui/material/Typography'\nimport ItemsList from 'components/ItemsList'\nimport MenuItem from '@mui/material/MenuItem'\nimport FormControl from '@mui/material/FormControl'\nimport InputLabel from '@mui/material/InputLabel'\nimport Select from '@mui/material/Select'\nimport IconButton from '@mui/material/IconButton'\nimport ScenarioEvent from './ScenarioEvent'\nimport { MdAdd } from 'react-icons/md'\nimport { scenarioHint } from './hints'\nimport WithHint from './WithHint'\nimport { connect } from 'react-redux'\nimport { useParams } from 'react-router'\nimport { saveLocalPack } from 'localStorage/localPacks'\nimport { mapPackState } from 'utils.js'\n\nScenario.propTypes = { formik: PropTypes.object, pack: PropTypes.object, dispatch: PropTypes.func }\nfunction Scenario({ formik, ...props }) {\n  const [scenario, setScenario] = React.useState([])\n  const [newEventValue, setNewEventValue] = React.useState('')\n  const [scenarioUpdateTimeout, setScenarioUpdateTimeout] = React.useState()\n  const params = useParams()\n  const round = params.roundIndex\n  const questionPrice = params.questionPrice\n  const questions = props.pack.rounds[round-1].themes[params.themeIndex-1].questions\n  const question = questions[questions.findIndex(({ price }) => price === Number(questionPrice))]\n  React.useEffect(() => question.scenario && setScenario(question.scenario), [])\n\n  React.useEffect(() => {\n    clearTimeout(scenarioUpdateTimeout)\n    const scenarioUpdateQueue = setTimeout(() => updateQuestionScenario(scenario), 1000)\n    setScenarioUpdateTimeout(scenarioUpdateQueue)\n  }, [scenario])\n\n  const updateQuestionScenario = async scenario => {\n    const pack = { ...props.pack }\n    const round = params.roundIndex-1\n    const questions = pack.rounds[round].themes[params.themeIndex-1].questions\n    const question = questions[questions.findIndex(({ price }) => price === Number(questionPrice))]\n    question.scenario = scenario\n    await saveLocalPack(pack)\n    props.dispatch({ type: 'pack/load', pack })\n  }\n\n  const reorder = (list, startIndex, endIndex) => {\n    const result = Array.from(list)\n    const [removed] = result.splice(startIndex, 1)\n    result.splice(endIndex, 0, removed)\n    return result\n  }\n\n  const onDragEnd = result => {\n    if (!result.destination) return\n    const items = reorder(scenario, result.source.index, result.destination.index)\n    setScenario(items)\n  }\n\n  const handleAddEvent = () => {\n    setNewEventValue('')\n    setScenario([...scenario, { type: newEventValue, duration: 3, data: {} }])\n  }\n\n  const handleDelete = index => {\n    const newScenario = [...scenario]\n    newScenario.splice(index, 1)\n    setScenario(newScenario)\n  }\n\n  const handleChangeDuration = (index, value) => {\n    const newScenario = [...scenario]\n    newScenario[index].duration = value\n    setScenario(newScenario)\n  }\n\n  const handleChangeData = (index, data) => {\n    const newScenario = [...scenario]\n    newScenario[index].data = data\n    setScenario(newScenario)\n  }\n\n  return (\n    <div className={styles.scenario}>\n      <WithHint hint={scenarioHint}>\n        <Typography variant='h6'></Typography>\n      </WithHint>\n      <ItemsList\n        droppableId='scenario'\n        onDragEnd={onDragEnd}\n        list={scenario}\n        draggableProps={{\n          onDelete: handleDelete, formik,\n          onChangeDuration: handleChangeDuration,\n          onChangeData: handleChangeData,\n          scenario\n        }}\n        noItemsLabel=' '\n        itemComponent={ScenarioEvent}\n      />\n      {scenario.length < 100 &&\n        <div className={styles.addEvent}>\n          <FormControl fullWidth>\n            <InputLabel> </InputLabel>\n            <Select\n              name={name}\n              value={newEventValue}\n              onChange={e => setNewEventValue(e.target.value)}\n              label=' '\n              displayEmpty={true}\n            >\n              <MenuItem value='text'>  </MenuItem>\n              <MenuItem value='say'> </MenuItem>\n              <MenuItem value='image'></MenuItem>\n              <MenuItem value='voice'></MenuItem>\n              <MenuItem value='video'></MenuItem>\n              <MenuItem value='marker'><i>[ ]</i></MenuItem>\n            </Select>\n          </FormControl>\n          <IconButton onClick={handleAddEvent} disabled={!newEventValue}>\n            <MdAdd />\n          </IconButton>\n        </div>}\n      <Typography variant='body2' color='text.secondary'>\n             \n      </Typography>\n    </div>\n  )\n}\n\nexport default connect(mapPackState)(Scenario)\n","import styles from './styles.module.scss'\nimport WithHint from './WithHint'\nimport Typography from '@mui/material/Typography'\nimport { scenarioHint } from './hints'\n\nexport default function NoScenario() {\n  return (\n    <div className={styles.scenario}>\n      <WithHint hint={scenarioHint}>\n        <Typography variant='h6'></Typography>\n      </WithHint>\n      <Typography variant='body2' color='text.secondary'>\n             ,   \n      </Typography>\n    </div>\n  )\n}\n","export const validate = (values, props, params) => {\n  const questions = [...props.pack.rounds[params.roundIndex-1].themes[params.themeIndex-1].questions]\n\n  const errors = {}\n  if(values.price !== props.data?.price && questions.some(({ price }) => price === values.price)) {\n    errors.price = '        '\n  }\n\n  const checkRealPrice = () => {\n    checkNumber('realprice', '   ', '      0')\n  }\n\n  const checkNumber = (propertyName, noValueError = ' ', zeroError = '    0') => {\n    if(values[propertyName] === undefined || values[propertyName] === '') {\n      errors[propertyName] = noValueError\n    } else if (values[propertyName] === 0) {\n      errors[propertyName] = zeroError\n    }\n  }\n\n  switch(values.type) {\n    case 'cat':\n      checkRealPrice()\n      break\n\n    case 'bagcat':\n      if(!values.questionPriceType) {\n        errors.questionPriceType = '    '\n      } else {\n        switch(values.questionPriceType) {\n          case 'fixed':\n            checkRealPrice()\n            break\n\n          case 'byPlayer':\n            ['realpriceFrom', 'realpriceTo'].forEach(checkNumber)\n            if(values.realpriceStep === 0) errors.realpriceStep = '     0'\n            break\n        }\n      }\n      if(!values.detailsDisclosure) errors.detailsDisclosure = ' ,    '\n      break\n  }\n\n  return errors\n}\n","import PropTypes from 'prop-types'\nimport * as yup from 'yup'\nimport styles from './styles.module.scss'\nimport { useFormik } from 'formik'\nimport { useParams, useHistory, Prompt } from 'react-router-dom'\nimport Button from '@mui/material/Button'\nimport { useBeforeunload } from 'react-beforeunload'\nimport FormFields from './FormFields'\nimport Scenario from './Scenario'\nimport NoScenario from './NoScenario'\nimport { mapPackState, initValues } from '../../../../utils'\nimport { connect } from 'react-redux'\nimport { saveLocalPack } from 'localStorage/localPacks'\nimport { validate } from './validation'\n\nconst priceSchema = yup\n  .number()\n  .integer()\n  .min(1, '     0')\n  .max(4294967295) // max of uint32\n\nconst validationSchema = yup.object({\n  price: priceSchema.required('  '),\n  realprice: priceSchema,\n  realtheme: yup.string(),\n  type: yup\n    .string()\n    .required('  '),\n  transferToSelf: yup.bool(),\n  detailsDisclosure: yup.string(),\n  realpriceFrom: yup.number(),\n  realpriceTo: yup.number(),\n  realpriceStep: yup.number(),\n  correctAnswers: yup\n    .array()\n    .ensure()\n    .min(1, '     ')\n    .required('     '),\n  incorrectAnswers: yup.array().ensure()\n})\n\nQuestionContent.propTypes = {\n  data: PropTypes.object,\n  pack: PropTypes.object,\n  dispatch: PropTypes.func\n}\n\nfunction QuestionContent(props) {\n  const history = useHistory()\n  const params = useParams()\n  const round = params.roundIndex\n  const questionPrice = params.questionPrice\n  const questions = props.pack.rounds[round-1].themes[params.themeIndex-1].questions\n  const newQuestion = questionPrice === 'add'\n\n  const getNextPrice = questions => {\n    const findRegularity = () => {\n      let delta\n      for(let i = 1; i < questions.length; i++) {\n        let newDelta = questions[i].price - questions[i-1].price\n        if(delta !== undefined && delta !== newDelta) return undefined\n        else delta = newDelta\n      }\n      return questions[questions.length - 1].price+delta\n    }\n\n    const add100 = () => {\n      return questions[questions.length - 1].price+100\n    }\n\n    return questions.length === 0 ? 100 : findRegularity() || add100()\n  }\n  const initialValues = initValues(validationSchema,\n    newQuestion ? { ...props.data, price: getNextPrice(questions) } : props.data\n  )\n  const formik = useFormik({\n    initialValues,\n    validate: values => validate(values, props, params), validationSchema,\n    validateOnChange: false,\n    validateOnBlur: false,\n    onSubmit: async (values) => {\n      const pack = { ...props.pack }\n      const question = newQuestion ? { ...values } : { ...props.data, ...values }\n      let questions = pack.rounds[round-1].themes[params.themeIndex-1].questions\n      if(newQuestion) {\n        questions.push(question)\n      } else {\n        questions[questions.findIndex(({ price }) => price === Number(questionPrice))] = question\n      }\n      questions = questions.sort((a, b) => a.price - b.price)\n      await saveLocalPack(pack)\n      props.dispatch({ type: 'pack/load', pack })\n      history.push(`/pack/${pack.uuid}/rounds/${round}`)\n    },\n  })\n\n  const submitting = formik.isSubmitting\n\n  useBeforeunload((event) => {\n    if(Object.keys(formik.touched).length) event.preventDefault()\n  })\n\n  return (\n    <div className={styles.container}>\n      <form onSubmit={formik.handleSubmit} className={styles.form}>\n        <FormFields formik={formik} submitting={submitting} />\n        <Button\n          color='primary'\n          variant='contained'\n          type='submit'\n          disabled={(!newQuestion && !Object.keys(formik.touched).length) || submitting}\n          className={styles.submit}\n        >\n          {newQuestion ? ' ' : ''}\n        </Button>\n      </form>\n      {newQuestion\n        ? <NoScenario />\n        : <Scenario formik={formik} submitting={formik.isValidating || submitting} />\n      }\n      <Prompt\n        when={Object.keys(formik.touched).length && !submitting}\n        message='   ,   ?'\n      />\n    </div>\n  )\n}\n\nexport default connect(mapPackState)(QuestionContent)\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { useParams } from 'react-router-dom'\nimport { connect } from 'react-redux'\nimport { mapPackState } from '../../../utils'\nimport NotFound404 from 'components/NotFound404'\nimport QuestionContent from './QuestionContent'\n\nQuestion.propTypes = {\n  pack: PropTypes.object,\n}\nfunction Question(props) {\n  const [notFound, setNotFound] = React.useState()\n  const [question, setQuestion] = React.useState()\n  const params = useParams()\n\n  React.useEffect(() => {\n    const pack = props.pack\n    if(!pack) return setNotFound(true)\n    const round = pack.rounds[params.roundIndex-1]\n    if(!round) return setNotFound(true)\n    const theme = round.themes[params.themeIndex-1]\n    if(!theme) return setNotFound(true)\n    if(params.questionPrice !== 'add') {\n      const question = theme.questions.find(({ price }) => price === Number(params.questionPrice))\n      if(!question) return setNotFound(true)\n      setQuestion(question)\n    }\n    setNotFound(false)\n  }, [params])\n\n  return (\n    notFound !== undefined && (\n      notFound\n        ? <NotFound404 />\n        : <QuestionContent data={question} />)\n  )\n}\n\nexport default connect(mapPackState)(Question)\n","import PropTypes from 'prop-types'\nimport styles from './styles.module.scss'\nimport PackBreadcrumbs from './PackBreadcrumbs/'\nimport { connect } from 'react-redux'\nimport { componentsPropTypes } from '../../consts'\nimport PackToolbar from './PackToolbar/'\nimport Rounds from './Rounds'\nimport Settings from './Settings/'\nimport { Switch, Route, useRouteMatch } from 'react-router-dom'\nimport RoundThemes from './RoundThemes'\nimport NotFound404 from 'components/NotFound404'\nimport Question from './Question'\nimport { mapPackState } from '../../utils'\n\nPackPageContainer.propTypes = {\n  children: PropTypes.node,\n  pack: componentsPropTypes.pack,\n  toolbar: PropTypes.string\n}\n\nfunction PackPageContainer(props) {\n  const { path } = useRouteMatch()\n\n  return (\n    props.pack\n    && (props.pack === 'notFound'\n      ? <NotFound404 />\n      : <div className={styles.container}>\n        <div className={styles.toolbar}>\n          <PackBreadcrumbs />\n          <PackToolbar />\n        </div>\n        <Switch>\n          <Route exact path={path}>\n            <Rounds />\n          </Route>\n          <Route path={`${path}/settings`}>\n            <Settings />\n          </Route>\n          <Route path={`${path}/rounds/:roundIndex/themes/:themeIndex/questions/:questionPrice`}>\n            <Question />\n          </Route>\n          <Route path={`${path}/rounds/:roundIndex`}>\n            <RoundThemes />\n          </Route>\n          <Route path='*'><NotFound404 /></Route>\n        </Switch>\n      </div>)\n  )\n}\n\nexport default connect(mapPackState)(PackPageContainer)\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { useLocation } from 'react-router-dom'\nimport styles from './styles.module.scss'\nimport { connect } from 'react-redux'\nimport { loadLocalPack } from '../../localStorage/localPacks'\n\nContainer.propTypes = {\n  children: PropTypes.node,\n  dispatch: PropTypes.func\n}\nfunction Container(props) {\n  const route = useLocation()\n\n  React.useEffect(() => {\n    routeChanged(route.pathname.split('/').filter(String))\n  }, [route])\n\n  const routeChanged = async pathParts => {\n    if(pathParts[0] === 'pack') {\n      const packUUID = pathParts[1]\n      const pack = await loadLocalPack(packUUID)\n      props.dispatch({ type: 'pack/load', pack: pack ?? 'notFound' })\n    }\n  }\n\n  return (\n    <div className={styles.container}>\n      {props.children}\n    </div>\n  )\n}\n\nexport default connect(null)(Container)\n","import {\n  BrowserRouter,\n  Switch,\n  Route\n} from 'react-router-dom'\nimport Dashboard from './routes/Dashboard'\nimport { createTheme, ThemeProvider } from '@mui/material/styles'\nimport Navigation from './components/Navigation/index.js'\nimport NewPack from './routes/NewPack'\nimport Pack from './routes/Pack'\nimport sipackerStore from './reducers'\nimport { Provider } from 'react-redux'\nimport Container from './components/Container'\nimport 'dayjs/locale/ru'\nimport { history } from './utils'\nimport NotFound404 from 'components/NotFound404'\nimport ContextMenuProvider from 'components/ContextMenu'\n\nexport const darkTheme = createTheme({\n  palette: {\n    mode: 'dark',\n    primary: {\n      main: '#4248fb'\n    }\n  },\n})\n\nexport default function App() {\n  return (\n    <Provider store={sipackerStore}>\n      <ThemeProvider theme={darkTheme}>\n        <BrowserRouter history={history} basename={process.env.REACT_APP_PREFIX}>\n          <ContextMenuProvider>\n            <Container>\n              <Navigation />\n              <Switch>\n                <Route exact path='/'>\n                  <Dashboard />\n                </Route>\n                <Route path='/create'>\n                  <NewPack />\n                </Route>\n                <Route path={['/pack/:packUUID', '/pack/:packUUID/*']}>\n                  <Pack />\n                </Route>\n                <Route path='*'><NotFound404 /></Route>\n              </Switch>\n            </Container>\n          </ContextMenuProvider>\n        </BrowserRouter>\n      </ThemeProvider>\n    </Provider>\n  )\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.scss'\nimport App from './App'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n)\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"toolbar\":\"styles_toolbar__1W5Un\",\"name\":\"styles_name__2RB5S\",\"delete\":\"styles_delete__2ihaf\",\"addTheme\":\"styles_addTheme__1hwa9\",\"table\":\"styles_table__3es8F\",\"rowName\":\"styles_rowName__1K8zb\",\"tableCell\":\"styles_tableCell__1cve7\",\"buttonBase\":\"styles_buttonBase__2kQLq\",\"heading\":\"styles_heading__1IQEt\",\"noItemsYet\":\"styles_noItemsYet__BxKD2\",\"tableRow\":\"styles_tableRow__2jH6j\",\"strikethrough\":\"styles_strikethrough__DFxi_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"rounds\":\"styles_rounds__1ZZ2U\",\"heading\":\"styles_heading__-ydFv\",\"cardOfRound\":\"styles_cardOfRound__2AkoD\",\"item\":\"styles_item__3E1HY\",\"delete\":\"styles_delete__24Jnc\",\"link\":\"styles_link__B9CM5\",\"flex1\":\"styles_flex1__3-SY4\",\"inputField\":\"styles_inputField__38y2T\",\"droppable\":\"styles_droppable__25geG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__OqZ1N\",\"label\":\"styles_label__VxlIK\",\"preview\":\"styles_preview__2qqOY\",\"image\":\"styles_image__29S6D\",\"placeholder\":\"styles_placeholder__1vE4B\",\"loading\":\"styles_loading__1wm-5\",\"fileMissing\":\"styles_fileMissing__3t61m\",\"icon\":\"styles_icon__345-2\",\"info\":\"styles_info__1nl83\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"addItem\":\"styles_addItem__3dCij\",\"addButton\":\"styles_addButton__3g9mJ\",\"button\":\"styles_button__3ZegY\",\"expand\":\"styles_expand__2-jSs\",\"addButtonOuter\":\"styles_addButtonOuter__1y9QO\"};"],"sourceRoot":""}